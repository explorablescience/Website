import{j as e,r as j,R as de}from"./react-BdCubYHz.js";import{R as Je}from"./react-dom-DROicfU5.js";import{u as U,C as Ue,a as Xe,H as Qe,P as me,O as qe,E as ge,b as et}from"./@react-three-DFGkI1lQ.js";import{E,u as q}from"./react-error-boundary-CjL9E7Cy.js";import{M as A,a as tt}from"./better-react-mathjax-DxDn-ObK.js";import"./d3-transition-D0z06rge.js";import"./d3-zoom-DJfp0ujn.js";import{l as J}from"./d3-scale-DjanLsN9.js";import{r as oe}from"./d3-array-o8Dej1Ei.js";import{d as fe,p as xe}from"./d3-selection-Bg2aTuTQ.js";import{a as pe,b as je}from"./d3-axis-D3QohQNI.js";import{l as we}from"./d3-shape-CjIy0WYm.js";import"./three-Dlbs-qyx.js";import"./react-use-measure-DvzsJVfN.js";import"./its-fine-UdzVbGov.js";import"./react-reconciler-C_iaNTue.js";import"./scheduler-DV1PgV85.js";import"./@babel-CF3RwP-h.js";import"./zustand-JvyHyJda.js";import"./use-sync-external-store-VaZ3XG0a.js";import"./three-stdlib-BpduEzU0.js";import"./@monogrid-7l7o_qaB.js";import"./suspend-react-BKIKQNXN.js";import"./d3-timer-DdKHrDhs.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-interpolate-1ID44o_P.js";import"./d3-color-9lF95FHy.js";import"./d3-ease-DRPgKoYJ.js";import"./d3-format-CzD4bSOQ.js";import"./d3-path-CimkQT29.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(u){if(u.ep)return;u.ep=!0;const l=s(u);fetch(u.href,l)}})();function ue(t){const{nodes:n,materials:s}=U("/models/magnet.glb");return e.jsxs("group",{...t,dispose:null,rotation:t.rotation||[0,t.orientation===0?0:Math.PI,0],children:[e.jsxs("group",{scale:[.763,.3,1],children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube.geometry,material:s.Red}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube_1.geometry,material:s.Blue}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube_2.geometry,material:s.Metallic})]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.S.geometry,material:s.Text,position:[-.007,.32,1.556],scale:[2.043,1,2.043]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.N.geometry,material:s.Text,position:[-.001,.32,-1.636],rotation:[Math.PI,0,Math.PI],scale:[2.043,1,2.043]})]})}U.preload("/models/magnet.glb");function nt(t,n,s){j.useEffect(()=>{const a=setInterval(()=>{t()},n);return()=>clearInterval(a)},[n,...s])}function ye(t,n){j.useEffect(()=>{if(!t.current)return;const s=new IntersectionObserver(([a])=>{n(a.isIntersecting)});return s.observe(t.current),()=>{s.disconnect()}},[t])}function Ve(t){return t.toLowerCase().replace(/\s+/g,"-")}function Be(t){return e.jsx("div",{className:"simulation-controls",children:t.children})}function $(t){const n=j.useRef(null),[s,a]=j.useState(!1),u=r=>(r-t.min)/(t.max-t.min)*100,l=r=>Math.max(t.min,Math.min(t.max,r)),c=r=>{if(!n.current)return;const o=n.current.getBoundingClientRect();let m;if(r instanceof MouseEvent?m=r.clientX:m=r.touches[0].clientX,m<o.left||m>o.right){a(!1),t.onFocusEnd?.();return}const f=l((m-o.left)/o.width),x=t.min+f*(t.max-t.min);t.onChange(x)},h=r=>{a(!0),t.onFocusStart?.(),c(r.nativeEvent)},i=r=>{a(!0),t.onFocusStart?.(),c(r.nativeEvent)};return j.useEffect(()=>{const r=m=>{s&&c(m)},o=()=>{a(!1),t.onFocusEnd?.()};return s&&(window.addEventListener("mousemove",r),window.addEventListener("mouseup",o),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",o)),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",o)}},[s]),e.jsxs("div",{className:"simulation-slider",onMouseDown:h,children:[e.jsx("div",{className:"sim-slider-label",children:e.jsx("p",{style:{color:t.color||"#447997"},children:t.label})}),e.jsx("div",{className:"simulation-slider-bar-container",children:e.jsxs("div",{className:"simulation-slider-bar",ref:n,onTouchStart:i,children:[e.jsx("div",{className:"sim-slider-left-gutter",style:{width:`${u(t.value)}%`,background:t.color||"#447997"}}),e.jsx("div",{className:"sim-slider-right-gutter",style:{width:`${100-u(t.value)}%`,left:`${u(t.value)}%`}}),e.jsx("div",{className:"sim-slider-knob",style:{left:`${u(t.value)}%`},children:e.jsx("div",{className:"sim-slider-knob-inner",style:{background:t.color||"#447997"}})})]})}),t.displayValue&&e.jsx("div",{className:"sim-slider-value",children:e.jsx("p",{children:t.value.toFixed(2)})})]})}const it=""+new URL("icon_3d-BTJu6E7S.svg",import.meta.url).href;async function ve(){let t="unknown";try{t=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}return t}function be(){let t={};try{t={href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,viewportSize:{width:window.innerWidth,height:window.innerHeight},browserWindowSize:{width:window.outerWidth,height:window.outerHeight},screenSize:{width:window.screen.width,height:window.screen.height},devicePixelRatio:window.devicePixelRatio}}catch{}let n={};try{n={title:document.title,referrer:document.referrer,readyState:document.readyState,charset:document.characterSet,lang:document.documentElement.lang,url:document.URL,visibilityState:document.visibilityState}}catch{}let s={};try{s={connection:{effectiveType:navigator.connection?.effectiveType||"unknown",downlink:navigator.connection?.downlink||0,rtt:navigator.connection?.rtt||0},cookieEnabled:navigator.cookieEnabled,deviceMemory:navigator.deviceMemory||0,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency||0,language:navigator.language,languages:navigator.languages,onLine:navigator.onLine,userAgent:navigator.userAgent,userAgentData:{brands:navigator.userAgentData?.brands||[],mobile:navigator.userAgentData?.mobile||!1,platform:navigator.userAgentData?.platform||""},webdriver:navigator.webdriver||!1}}catch{}return[t,n,s]}function Oe(){let t={};try{let n=["element","event","first-input","largest-contentful-paint","layout-shift","long-animation-frame","longtask","mark","measure","navigation","paint","resource","visibility-state"];t={eventCounts:window.performance?.eventCounts||{},memory:{jsHeapSizeLimit:window.performance?.memory?.jsHeapSizeLimit||0,totalJSHeapSize:window.performance?.memory?.totalJSHeapSize||0,usedJSHeapSize:window.performance?.memory?.usedJSHeapSize||0},entries:n}}catch{}return t}const st=async()=>{const t=await ve();let n=Oe();const[s,a,u]=be(),l={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"connection_report",payload:{timestamp:new Date().toISOString(),ipAddress:t,performances:n,window:s,document:a,navigator:u}};fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})},C=async(t,n)=>{const s=await ve();let a=Oe(),u={};try{u={name:t.name,message:t.message,cause:t.cause,stack:t.stack,digest:n?.digest||"",componentStack:n?.componentStack||""}}catch{}const[l,c,h]=be(),i={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"error_report",payload:{timestamp:new Date().toISOString(),ipAddress:s,error:u,performances:a,window:l,document:c,navigator:h}};fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},rt=async(t,n,s)=>{const a=await ve(),[u,l,c]=be(),h={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"contact_form",payload:{name:t,email:n,message:s,trackingPayload:{timestamp:new Date().toISOString(),ipAddress:a,window:u,document:l,navigator:c}}};return(await fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok};function at({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function ot(){return e.jsx("div",{className:"loading-simulation",children:"Loading simulation...."})}function lt(){const{progress:t}=Xe();let n=Math.round(t);return e.jsxs(Qe,{center:!0,style:{fontFamily:"'Railway', 'Montserrat', Arial'",color:"black",fontSize:"30px",width:"max-content"},children:["Loading simulation... ",n,"% done."]})}function We(t){const n=t.show3DIcon!=!1&&!t.is2D;return e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:t.customErrorComponent||at,onError:C,children:e.jsx(j.Suspense,{fallback:e.jsx(ot,{}),children:e.jsxs("div",{className:"simulation-canvas-container",style:{aspectRatio:t.aspectRatio||"16/9"},children:[e.jsx("div",{className:"simulation-canvas-icon",children:n&&e.jsx("img",{src:it,className:"icon-3d",alt:"3D Icon"})}),!t.is2D&&e.jsx(Ue,{frameloop:t.visible?"always":"never",ref:t.canvasRef,className:"simulation-canvas",shadows:!0,resize:{scroll:!1},style:{cursor:n?"move":"default"},children:e.jsx(j.Suspense,{fallback:e.jsx(lt,{}),children:e.jsx("group",{name:"core",children:t.children})})}),t.is2D&&e.jsx("canvas",{className:"simulation-canvas",ref:t.canvasRef})]})})})})}function ct({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function H(t){const n=j.createRef(),[s,a]=j.useState(!1);return ye(n,u=>{t.onChangeVisibleState?.(u),a(u)}),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:ct,onError:C,children:e.jsxs("div",{className:"simulation-container",ref:n,children:[t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsx(We,{aspectRatio:t.aspectRatio,canvasRef:t.canvasRef,is2D:t.is2D,visible:s,children:t.simulation}),e.jsx(Be,{children:t.controls})]})})})}function ht(t){const[n,s]=j.useState(.1),[a,u]=j.useState(!0),[l,c]=j.useState(!1),[h,i]=j.useState(1),[r,o]=j.useState(0),m=j.useRef(null),[f,x]=j.useState(!1);j.useEffect(()=>{m.current&&(m.current.style.cursor=f?"pointer":"unset")},[f]),nt(()=>{a&&(l||s(w=>{let v=w-.01*(h===r?1:-1)/Math.pow(w+.5,2)*1.3;return Math.max(0,Math.min(1,v))}))},20,[l,h,r,a]);let g=e.jsxs(e.Fragment,{children:[e.jsxs("group",{name:"camera",children:[e.jsx(me,{makeDefault:!0,position:[7,3.8,2.5],fov:55}),e.jsx(qe,{})]}),e.jsx("group",{name:"lights",children:e.jsx(ge,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsxs("group",{name:"simulation",children:[e.jsx(ue,{position:[0,0,-12],onClick:()=>i(h===0?1:0),onPointerOver:()=>x(!0),onPointerOut:()=>x(!1),orientation:h}),e.jsx(ue,{position:[0,0,4-11*(1-n)],onClick:()=>o(r===0?1:0),onPointerOver:()=>x(!0),onPointerOut:()=>x(!1),orientation:r})]})]}),p=e.jsx(e.Fragment,{children:e.jsx($,{label:"Separation",value:n,onChange:s,onFocusStart:()=>c(!0),onFocusEnd:()=>c(!1),min:0,max:1,step:.01,color:"#746cc0ff",displayValue:!1})});return e.jsx(H,{aspectRatio:"21/9",canvasRef:m,title:t.title,description:t.description,simulation:g,controls:p,onChangeVisibleState:u})}const dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20320%20320'%3e%3cpath%20d='M82.87%20129.48S77.32%2098.96%20114.31%2074c-12.95%200-89.7%2030.52-89.7%20113.74%200%2033.09%2027.59%2059.73%2061.01%2058.19%2029.85-1.37%2054.07-25.6%2055.44-55.45%201.54-33.41-25.1-61-58.19-61zm154.26%200S231.58%2098.96%20268.57%2074c-12.95%200-89.7%2030.52-89.7%20113.74%200%2033.09%2027.58%2059.73%2061.01%2058.19%2029.85-1.37%2054.07-25.6%2055.44-55.45%201.54-33.41-25.1-61-58.19-61z'%20fill='%23b5b5b5'%3e%3c/path%3e%3c/svg%3e",ut="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20320%20320'%3e%3cpath%20d='M239.64%2074.01c-32.16-.89-59.56%2023.76-61.9%2055.85-2.59%2035.43%2025.38%2064.97%2060.26%2064.97%200%200%200%2015.82-10.97%2034.02-5.9%209.79%204.91%2021.1%2015.04%2015.8%2030.22-15.81%2062.45-48.71%2056.36-110.25-3.24-32.64-26.45-59.5-58.79-60.39zm-156.74%200c-32.16-.89-59.56%2023.76-61.9%2055.85-2.59%2035.43%2025.38%2064.97%2060.26%2064.97%200%200%200%2015.82-10.97%2034.02-5.9%209.79%204.91%2021.1%2015.04%2015.8%2030.22-15.81%2062.45-48.71%2056.36-110.25-3.25-32.64-26.45-59.5-58.79-60.39z'%20fill='%23b5b5b5'%3e%3c/path%3e%3c/svg%3e";function Me({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went very wrong in the article."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function mt(t){return e.jsx(E,{FallbackComponent:Me,onError:C,children:e.jsx("article",{className:"article",children:t.children})})}function ne(t){return e.jsx(E,{FallbackComponent:Me,onError:C,children:e.jsxs("section",{className:`part-upper ${t.className}`,id:Ve(t.title),children:[t.hideTitle==null?e.jsx("h1",{className:"part-title",children:t.title}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"part-content",children:t.children})]})})}function F(t){return e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:Me,onError:C,children:e.jsxs("section",{id:Ve(t.title?t.title:""),children:[t.title&&e.jsx("h2",{className:"section-title",children:t.title}),t.children]})})})}function b(t){return e.jsx("div",{className:"paragraph",children:t.children})}const He={question:{svg:{viewBox:"0 0 1024 1024",paths:["M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z"]},title:"Question",color:"#746cc0"},note:{svg:{viewBox:"0 0 1024 1024",paths:["M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","M512 336m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z","M536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"]},title:"Note",color:"#4b4b4b"}};function B(t){return e.jsx(Ke,{...t,data:He.question,children:t.children})}function _(t){return e.jsx(Ke,{...t,data:He.note,children:t.children})}function Ke(t){const n=t.data;return e.jsxs("div",{className:`aside ${n.title.toLowerCase()}`,style:{borderLeft:`4px solid ${n.color}`},children:[e.jsxs("div",{className:"aside-title",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:n.svg.viewBox,fill:n.color,children:n.svg.paths.map((s,a)=>e.jsx("path",{d:s},a))}),e.jsx("span",{style:{color:n.color},children:n.title})]}),e.jsx("div",{className:"aside-content",children:t.children})]})}function Ne(t){return e.jsxs("div",{className:"citation",children:[e.jsx("div",{className:"citation-left",children:e.jsx("img",{src:dt,alt:"Open quote"})}),e.jsx("div",{className:"citation-text",children:t.children}),e.jsx("div",{className:"citation-right",children:e.jsx("img",{src:ut,alt:"Close quote"})})]})}function d(t){return e.jsx(e.Fragment,{children:e.jsx("span",{className:`text-color-${t.type} ${t.bold?"text-color-bold":""} ${t.italic?"text-color-italic":""}`,children:t.children})})}function G(){return e.jsx("div",{style:{height:"4px"}})}function Le(t){let n=[];const s=(a,u,l)=>[Math.round(a[0]+(u[0]-a[0])*l),Math.round(a[1]+(u[1]-a[1])*l),Math.round(a[2]+(u[2]-a[2])*l)];for(let a=0;a<t.children.length;a++){const u=t.children[a],l=`rgba(${s(t.from,t.to,a/t.children.length)[0]}, ${s(t.from,t.to,a/t.children.length)[1]}, ${s(t.from,t.to,a/t.children.length)[2]}, 1)`;n.push(e.jsx("span",{style:{color:l},children:u},a))}return e.jsx("span",{className:`gradient-text ${t.bold?"gradient-text-bold":""} ${t.italic?"gradient-text-italic":""}`,children:n})}function Y(t){const n=j.useRef(null),[s,a]=j.useState(!1),u=()=>{a(!s)};return e.jsxs("section",{className:"more-informations",children:[e.jsxs("div",{className:"more-informations-title",children:[e.jsx("div",{className:"more-informations-label",children:e.jsx("span",{children:"For more informations..."})}),e.jsx("h3",{className:"more-informations-title-content",children:t.title}),e.jsx("div",{className:"more-informations-icon",onClick:u,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",style:{transform:s?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.3s ease-in-out"},children:e.jsx("path",{fill:"currentColor",d:"M19 6.25l-1.5-1.5-7.5 7.5-7.5-7.5L1 6.25l9 9 9-9z"})})})]}),s&&e.jsx("div",{className:"more-informations-bar"}),e.jsx("div",{className:`more-informations-content ${s?"more-informations-content-open":""}`,ref:n,style:{height:s?"100%":"0px"},children:t.children})]})}function Z(t){return e.jsxs("section",{className:"theorist-questions",children:[e.jsx("div",{className:"theorist-questions-title-bar theorist-questions-title-bar-up"}),e.jsx("div",{className:"theorist-questions-title",children:e.jsx("div",{className:"theorist-questions-title-content",children:"Theorist Corner"})}),e.jsx("div",{className:"theorist-questions-content",children:t.children}),e.jsx("div",{className:"theorist-questions-title-bar theorist-questions-title-bar-down"})]})}function X(t){return e.jsx("div",{className:"separator",...t})}function gt(t){const n=[];for(const s of t.items){const a=s.checked?"#2eb632":"#ff5151";n.push(e.jsxs("li",{className:"checkbox-item",children:[e.jsx("div",{className:s.checked?"checkbox-yes":"checkbox-no",children:s.checked?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",children:e.jsx("path",{d:"M160 144C151.2 144 144 151.2 144 160L144 480C144 488.8 151.2 496 160 496L480 496C488.8 496 496 488.8 496 480L496 160C496 151.2 488.8 144 480 144L160 144zM96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM404.4 268.7L324.4 396.7C320.2 403.4 313 407.6 305.1 408C297.2 408.4 289.6 404.8 284.9 398.4L236.9 334.4C228.9 323.8 231.1 308.8 241.7 300.8C252.3 292.8 267.3 295 275.3 305.6L302.3 341.6L363.7 243.3C370.7 232.1 385.5 228.6 396.8 235.7C408.1 242.8 411.5 257.5 404.4 268.8z"})}):e.jsx("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM9.76 20.256q0 0.832 0.576 1.408t1.44 0.608 1.408-0.608l2.816-2.816 2.816 2.816q0.576 0.608 1.408 0.608t1.44-0.608 0.576-1.408-0.576-1.408l-2.848-2.848 2.848-2.816q0.576-0.576 0.576-1.408t-0.576-1.408-1.44-0.608-1.408 0.608l-2.816 2.816-2.816-2.816q-0.576-0.608-1.408-0.608t-1.44 0.608-0.576 1.408 0.576 1.408l2.848 2.816-2.848 2.848q-0.576 0.576-0.576 1.408z"})})}),e.jsxs("div",{children:[!s.checked&&e.jsx("div",{className:"crossbar"}),e.jsx("span",{style:{color:a},children:s.label}),s.description&&e.jsxs("span",{className:"description",children:[" - ",e.jsx("i",{children:s.description})]})]})]},s.label))}return e.jsx(e.Fragment,{children:e.jsx("ul",{children:n})})}function M(t){return t.type?e.jsx(d,{type:t.type,children:e.jsx(A,{inline:!0,children:`$${t.children}$`})}):e.jsx(A,{inline:!0,children:`$${t.children}$`})}function Ce(t){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"graph-list",children:[e.jsx("div",{className:"graph-list-arrow",style:t.customWidth?{width:t.customWidth.arrow}:{},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",fill:"#6a5ff7",children:e.jsx("polygon",{points:"50 15, 100 100, 0 100"})})}),e.jsx("div",{className:"graph-list-bar",style:t.customWidth?{width:t.customWidth.bar}:{}}),e.jsx("ol",{children:t.items.map((n,s)=>e.jsx("li",{className:"graph-list-item",children:n},s))})]})})}function ft(t){const n=j.useRef(null),[s,a]=j.useState(!1),u=()=>{a(!s)};return e.jsxs("section",{className:"more-informations",children:[e.jsxs("div",{className:"more-informations-title",children:[e.jsx("div",{className:"more-informations-label",children:e.jsx("span",{})}),e.jsx("h3",{className:"more-informations-title-content",children:"Sources"}),e.jsx("div",{className:"more-informations-icon",onClick:u,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",style:{transform:s?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.3s ease-in-out"},children:e.jsx("path",{fill:"currentColor",d:"M19 6.25l-1.5-1.5-7.5 7.5-7.5-7.5L1 6.25l9 9 9-9z"})})})]}),s&&e.jsx("div",{className:"more-informations-bar"}),e.jsx("div",{className:`more-informations-content ${s?"more-informations-content-open":""}`,ref:n,style:{height:s?"100%":"0px"},children:e.jsx(b,{children:e.jsx("ul",{children:t.list.map(([l,c,h],i)=>e.jsx("li",{className:"source-item",children:e.jsxs("div",{className:"source-item-content",children:[e.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:l}),e.jsx("p",{children:h})]})},i))})})})]})}function xt(t){const{nodes:n,materials:s}=U("/models/spins_lattice.glb");return e.jsxs("group",{...t,dispose:null,children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lattice_1.geometry,material:s.Lattice,position:[1.729,.257,-8.117],rotation:[0,-1.571,0]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lattice_2.geometry,material:s.Lattice,position:[3.342,.257,-6.733],rotation:[Math.PI,0,Math.PI],scale:[1,1,.869]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Atoms.geometry,material:s.Atom,position:[3.355,.27,-8.13],rotation:[0,-1.571,0]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Spin.geometry,material:s.Spin,position:[3.577,.259,-8.298],rotation:[0,-Math.PI/2,0],scale:.866})]})}U.preload("/models/spins_lattice.glb");function pt({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function jt({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation custom-simulation-error",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function wt(t){const[n,s]=j.useState(0),[a,u]=j.useState(0),[l,c]=j.useState(t.zoomDataLevel[0][2]);function h(x){s(x);const g=t.zoomDataLevel.findIndex(([y])=>x<Number(y));u(g===-1?t.zoomDataLevel.length-1:g);const w=(x-t.zoomDataLevel[g-1][0])/(t.zoomDataLevel[g][0]-t.zoomDataLevel[g-1][0])*(t.zoomDataLevel[g][2]-t.zoomDataLevel[g-1][2])+t.zoomDataLevel[g-1][2];c(w)}let i=e.jsxs(e.Fragment,{children:[e.jsx("group",{name:"camera",children:e.jsx(me,{makeDefault:!0,position:[0,l,0],rotation:[-Math.PI/2,0,0],fov:55,near:.001})}),e.jsx("group",{name:"lights",children:e.jsx(ge,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsxs("group",{name:"simulation",children:[e.jsx(ue,{position:[.1,0,.3],rotation:[0,Math.PI*-.8,0],orientation:0}),e.jsx(xt,{position:[0,.32,.004],rotation:[0,Math.PI/2,0],scale:.02})]})]}),r=e.jsx(e.Fragment,{children:e.jsx($,{label:"Zoom",value:n,onChange:h,min:0,max:1,step:.01,color:"#555555ff",displayValue:!1})});const o=j.useRef(null),[m,f]=j.useState(!1);return ye(o,x=>{f(x)}),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:pt,onError:C,children:e.jsxs("div",{className:"simulation-container",ref:o,children:[t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"simulation-info-container",children:[e.jsx(We,{aspectRatio:"11/9",show3DIcon:!1,customErrorComponent:jt,visible:m,children:i}),e.jsx("div",{className:"simulation-info-text",children:e.jsx("div",{children:e.jsx("p",{children:t.zoomDataLevel[a][1]})})})]}),e.jsx(Be,{children:r})]})})})}function Te(t){const{nodes:n,materials:s}=U("/models/spin.glb");return e.jsxs("group",{...t,dispose:null,children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cylinder.geometry,material:s.Spin}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cylinder_1.geometry,material:s.Atom})]})}U.preload("/models/spin.glb");function yt(t){const[n,s]=[11,5],a=2.3,u=1,l=.8,c=5,[h,i,r,o,m]=j.useMemo(()=>{const f=[],x=j.createRef(),g=[],p=new Array(9).fill(t.rotation),w=[];for(let y=0;y<n;y++)for(let v=0;v<s;v++){const L=j.createRef();f.push(e.jsx(Te,{ref:L,position:[(y-n/2)*a+u,0,(v-s/2)*a+u],rotation:[0,t.rotation,0]},`secondary-${y}-${v}`)),g.push(L),w.push(Math.random()*(c-l)+l)}return f[Math.floor(n/2)*s+Math.floor(s/2)]=e.jsx(Te,{ref:x,position:[-.15,0,0],rotation:[0,t.rotation,0]},"primary"),[f,x,g,p,w]},[]);return et((f,x)=>{if(!t.visible)return;const g=i.current;g&&g.rotation.set(0,t.rotation,0),r.forEach((p,w)=>{const y=p.current;if(y){o[w]=t.rotation;const v=o[w]-y.rotation.y;y.rotation.set(0,y.rotation.y+v*m[w]*x,0)}})}),e.jsx(e.Fragment,{children:h})}function vt(t){const[n,s]=j.useState(!1),[a,u]=j.useState(.5);let l=e.jsx(yt,{rotation:a,visible:n}),c=e.jsxs(e.Fragment,{children:[e.jsxs("group",{name:"camera",children:[e.jsx(me,{makeDefault:!0,position:[0,13.5,0],fov:40}),e.jsx(qe,{})]}),e.jsx("group",{name:"lights",children:e.jsx(ge,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsx("group",{name:"simulation",children:l})]}),h=e.jsx(e.Fragment,{children:e.jsx($,{label:"Rotation",value:a,onChange:u,min:0,max:Math.PI*2,step:.01,color:"#746cc0ff",displayValue:!1})});return e.jsx(H,{aspectRatio:"21/9",title:t.title,description:t.description,simulation:c,controls:h,onChangeVisibleState:s})}function bt(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Ie(t,n,s,a,u){const{Nx:l,Ny:c,spins:h}=t,i=n%l,r=Math.floor(n/l),o=[{x:i-1,y:r},{x:i+1,y:r},{x:i,y:r-1},{x:i,y:r+1}];let m=0;if(o.forEach(({x:f,y:x})=>{f<0&&(f+=l),f>=l&&(f-=l),x<0&&(x+=c),x>=c&&(x-=c);const g=x*l+f;m+=h[g]?1:-1}),m=-m*(h[n]?1:-1),u){const f=s*(a<2?.05:0);m-=f*(h[n]?1:-1)}return m}function Mt(t,n,s,a){const l=[...t.spins];for(let h=0;h<3e3;h++){const i=Math.floor(Math.random()*t.spins.length),r=2*Ie({Nx:t.Nx,Ny:t.Ny,spins:l},i,t.magFieldSign,n,s);l[i]=!l[i];let m=2*Ie({Nx:t.Nx,Ny:t.Ny,spins:l},i,t.magFieldSign,n,s)-r;if(!(m<=0)){if(s||a!=null){let f=Math.random(),x=1/n;if(f<=Math.exp(-x*m))continue;l[i]=!l[i]}s||(l[i]=!l[i])}}let c=0;return l.forEach(h=>{c+=h?1:-1}),c/=l.length,[l,c]}function Lt(t,n,s){t.fillStyle="white",t.clearRect(0,0,n.width,n.height);const a=1;s.spins.forEach((i,r)=>{const o=r%s.Nx*(n.width/s.Nx),m=Math.floor(r/s.Nx)*(n.height/s.Ny);i?t.fillStyle="#ff3235":t.fillStyle="#2939e2",t.fillRect(o,m,n.width/s.Nx+a,n.height/s.Ny+a)});const u=s.totalMagnetization,l=Math.min(.8,Math.abs(u*.9)+.05),c=5+25*l,h=Math.sign(u)==1?n.height*(.5-l/2):n.height-n.height*(.5-l/2);t.lineWidth=c,t.strokeStyle="white",t.fillStyle="white",t.lineJoin="bevel",bt(t,n.width-30,n.height/2,n.width-30,h,c*1.1)}function St(t,n,s,a,u,l){let c=j.useMemo(()=>{const[o,m]=[150,Math.floor(150/n)],f=new Array(o*m).fill(!1).map(()=>Math.random()<.5),x=Math.random()<.5?1:-1;return{Nx:o,Ny:m,spins:f,magFieldSign:x}},[]),h=j.useRef(c.spins),i=j.useRef(0);j.useEffect(()=>{if(!l)return;const r=t.current;r||C(new Error("Canvas reference is null (Ising simulation)"));const o=r,m=window.devicePixelRatio||1,f=o.getBoundingClientRect(),x=f.width*m,g=f.height*m;o.width=x,o.height=g;const p=o.getContext("2d");p||C(new Error("Canvas context is null (Ising simulation)"));const w=p;let y;new Date().getTime();const v=()=>{new Date().getTime(),[h.current,i.current]=Mt({Nx:c.Nx,Ny:c.Ny,spins:h.current,magFieldSign:c.magFieldSign},s,a,u),Lt(w,{width:x,height:g},{Nx:c.Nx,Ny:c.Ny,spins:h.current,totalMagnetization:i.current}),y=window.requestAnimationFrame(v)};return v(),()=>{window.cancelAnimationFrame(y)}},[t,l])}function re(t){const[n,s]=j.useState(!1),[a,u]=j.useState(t.customT==null?7:t.customT),l=j.createRef(),c=j.useMemo(()=>16/9,[]);St(l,c,a,t.useTemperature,t.customT,n);let h=e.jsx(e.Fragment,{children:e.jsx($,{label:"Temperature",value:a,onChange:u,min:0,max:10,step:.01,color:"#6a5ff7",displayValue:!1})});return e.jsx(H,{aspectRatio:`${c}`,title:t.title,description:t.description,controls:t.useTemperature?h:e.jsx(e.Fragment,{}),canvasRef:l,onChangeVisibleState:s,is2D:!0})}function se({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function kt(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Re(t){const n=t.magnetization,s=j.useRef(null);return j.useEffect(()=>{const a=s.current;a||C(new Error("Canvas reference is null (Ising Magnetization simulation)"));const u=a,l=window.devicePixelRatio||1,c=u.getBoundingClientRect(),h=c.width*l,i=c.height*l;u.width=h,u.height=i;const r=u.getContext("2d");r||C(new Error("Canvas context is null (Ising Magnetization simulation)"));const o=r,m=80,[f,x]=[m,Math.floor(m/(16/9))],g=Math.sign(n)==1?Math.abs(n):1-Math.abs(n),p=new Array(f*x).fill(!1).map(()=>Math.random()<(Math.abs(n)<.3?.5:g));o.fillStyle="white",o.clearRect(0,0,h,i);const w=1;p.forEach((k,N)=>{const T=N%f*(h/f),R=Math.floor(N/f)*(i/x);k?o.fillStyle="#ff3235":o.fillStyle="#2939e2",o.fillRect(T,R,h/f+w,i/x+w)});let y=n;Math.abs(y)<1e-5&&(y=Math.random()<.5?1e-5:-1e-5);const v=Math.abs(y*.75)*.95+.1,L=7/3+25/3*v,S=Math.sign(y)==1?i*(.5-v/2):i-i*(.5-v/2);o.lineWidth=L,o.strokeStyle="white",o.fillStyle="white",o.lineJoin="bevel",kt(o,h-20,i/2,h-20,S,L*1.1)},[s,n]),e.jsx(e.Fragment,{children:e.jsx("canvas",{className:"simulation-canvas",ref:s})})}function Nt(t,n,s){const a=n.current?.clientWidth||100,l=Math.min(a*.8,380);t.current.setAttribute("width",a.toString()),t.current.setAttribute("height",l.toString());const c={top:20,right:20,bottom:45,left:50},h=a-c.left-c.right,i=l-c.top-c.bottom,r=fe(t.current).append("svg").attr("width",h+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("transform",`translate(${c.left},${c.top})`),o=(L,S)=>{if(L<1){const k=-((-L-1)/2*2+1);return S*Math.sqrt(1-k*k)}return 0},m=J().domain([0,2]).range([0,h]).nice(),f=J().domain([-1.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(pe(m).ticks(h/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(f).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",h/2).attr("y",i+c.bottom-5).attr("fill","#6a5ff7").attr("font-size","16px").attr("font-weight","bold").text("Temperature"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#aa51df").attr("font-weight","bold").attr("font-size","16px").text("Total Magnetization");const x=we().x(L=>m(L.x)).y(L=>f(L.y));r.append("path").attr("fill","none").attr("stroke","#aa51df").attr("stroke-width",4.5).attr("d",x(oe(0,2,.001).map(L=>({x:L,y:o(L,1)})))),r.append("path").attr("fill","none").attr("stroke","#aa51df").attr("stroke-width",4.5).attr("d",x(oe(0,2,.001).map(L=>({x:L,y:o(L,-1)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#6a5ff7").attr("display","unset").attr("cx",g).attr("cy",f(o(p,1))),y=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#6a5ff7").attr("display","unset").attr("cx",g).attr("cy",f(o(p,-1)));s([o(p,1),o(p,-1)]);const v=r.append("line").attr("class","hover-line").attr("stroke","#6a5ff7").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",h).attr("height",i).attr("fill","transparent").on("mousemove",function(L){const[S,k]=xe(L),N=f.invert(k);if(N>=-1&&N<=1){const T=m.invert(S);v.attr("x1",S).attr("y1",0).attr("x2",S).attr("y2",i);const R=o(T,1);w.attr("display","unset").attr("cx",S).attr("cy",f(R));const P=o(T,-1);y.attr("display","unset").attr("cx",S).attr("cy",f(P)),s([Math.abs(R)<.001?Math.random()*1e-5:R,Math.abs(P)<.001?Math.random()*1e-5:P])}})}function Ct(t){const n=j.useRef(null),s=j.useRef(null),[a,u]=j.useState([0,0]);return j.useEffect(()=>{Nt(s,n,u)},[s]),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:se,onError:C,children:e.jsxs("div",{className:"ising-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"ising-graph-simulation-container",children:[e.jsx("div",{className:"ising-graph-canvas-container-up",children:e.jsx(E,{FallbackComponent:se,onError:C,children:e.jsx(Re,{magnetization:a[0]})})}),e.jsx("div",{ref:n,className:"ising-graph-canvas-container-svg",children:e.jsx(E,{FallbackComponent:se,onError:C,children:e.jsx("svg",{width:460,height:400,ref:s})})}),e.jsx("div",{className:"ising-graph-canvas-container-down",children:e.jsx(E,{FallbackComponent:se,onError:C,children:e.jsx(Re,{magnetization:a[1]})})}),e.jsx("div",{className:"ising-graphs-touch-icon",children:e.jsx("svg",{viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("g",{fill:"#aa51df",transform:"translate(85.333333, 42.666667)",children:e.jsx("path",{d:"M206.413257,215.447893 L206.413257,130.666667 C206.413257,99.7915733 181.28835,74.6666667 150.413257,74.6666667 C119.538163,74.6666667 94.4132566,99.7915733 94.4132566,130.666667 L94.4132566,250.096427 C84.0473899,241.401173 71.1085099,236.468907 57.5200299,236.468907 C41.3429632,236.468907 25.8116566,243.323093 14.9470166,255.281493 C-6.06205009,278.304853 -4.69501009,313.828267 17.6045099,335.429973 C17.6330966,335.45856 17.6435499,335.48992 17.6721366,335.518507 L112,426.666667 L320,426.666667 L320,250.666667 L206.413257,215.447893 Z M277.333333,384 C277.333333,384 128.393387,384 128,384 C128,384 53.2621099,313.552 45.9912832,306.927147 C37.7177899,299.39072 37.1202432,286.573013 44.6579499,278.29696 C52.1969366,270.023467 65.0146432,269.4272 73.2894166,276.963627 C78.8286166,282.010453 115.241417,312 115.241417,312 L131.74659,303.46624 L131.74659,130.666667 C131.74659,120.356693 140.104563,112 150.413257,112 C160.72323,112 169.079923,120.356693 169.079923,130.666667 L169.079923,248.541653 L277.333333,282.666667 L277.333333,384 Z M24.1438166,163.708373 C21.3728299,153.1328 19.7465899,142.098987 19.7465899,130.666667 C19.7465899,58.6250667 78.3612032,7.10542736e-15 150.413257,7.10542736e-15 C222.46531,7.10542736e-15 281.079923,58.6250667 281.079923,130.666667 C281.079923,142.098987 279.453683,153.1328 276.682697,163.708373 L236.211443,149.69792 C237.574643,143.552 238.413257,137.218773 238.413257,130.666667 C238.413257,82.1431467 198.936777,42.6666667 150.413257,42.6666667 C101.889737,42.6666667 62.4132566,82.1431467 62.4132566,130.666667 C62.4132566,137.218773 63.2518699,143.552 64.6150699,149.69792 L24.1438166,163.708373 Z",id:"Shape"})})})})]})]})})})}function I(t){return e.jsx(Le,{from:[255,50,53],to:[41,57,226],bold:t.bold,italic:t.italic,children:t.children})}function Tt(){return e.jsxs(ne,{title:"From the physics of magnetism...",children:[e.jsxs(F,{title:"What is a magnet?",children:[e.jsxs(b,{children:["Before diving into the ",e.jsx("strong",{children:"science of complexity"}),", let's start by exploring a simple yet fascinating example: ",e.jsx(I,{bold:!0,children:"magnets"}),". You will see that this example is not only interesting in itself, but also serves as a perfect introduction."]}),e.jsx(B,{children:"What is a magnet? Really, try to give a definition."}),e.jsx(b,{children:"Your first instinct might be something like"}),e.jsxs(Ne,{children:["A magnet is an object with a ",e.jsx(d,{type:"magnet-north",italic:!0,children:"north"})," and a ",e.jsx(d,{type:"magnet-south",italic:!0,children:"south"})," pole that attracts or repels other magnets."]}),e.jsx(ht,{title:"Magnets attraction and repulsion",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Here below is the first ",e.jsx("strong",{children:"interactive simulation"})," of this article.",e.jsx("br",{}),"Use the ",e.jsx(d,{type:"magnets-slider",bold:!0,children:"slider"})," to change the ",e.jsx(d,{type:"magnets-slider",italic:!0,children:"distance between the magnets"}),", and release it to see the effect. You can also ",e.jsx(I,{bold:!0,children:"click on a magnet"})," to change its ",e.jsx(I,{italic:!0,children:"orientation"}),"."]})})}),e.jsx(B,{children:"But let's ask again: What is a magnet, really?"}),e.jsxs(b,{children:["I'm not sure about you, but I find this definition a bit unsatisfactory. Moreover, this definition doesn't explain some properties:",e.jsxs("ul",{children:[e.jsxs("li",{children:["Do you know that, when you ",e.jsx("i",{children:e.jsx("strong",{children:"cut a magnet in half"})}),", you don't end up with a ",e.jsx("i",{children:"positive half"})," and a ",e.jsx("i",{children:"negative half"}),"? Instead, you get ",e.jsx(I,{italic:!0,children:"two smaller magnets"}),", each with its own positive and negative pole. Why is that?"]}),e.jsxs("li",{children:["Have you noticed that when a ",e.jsx(I,{children:"magnet"})," gets ",e.jsx(d,{type:"temperature",bold:!0,children:"hot"}),", it stops working? Why does this happen?"]})]})]}),e.jsx(b,{children:"In this first part, we'll explore all of these. As you'll see, the explanation is more subtle than it might appear, and it will lead us into some fascinating concepts in physics."})]}),e.jsxs(F,{title:"Zooming into matter",children:[e.jsx(wt,{title:"Zooming on a magnet",description:e.jsxs(b,{children:["Let's try to discover the secrets of a magnet by ",e.jsx("i",{children:"zooming in"})," to uncover what lies inside. Use the ",e.jsx(d,{type:"zoom-slider",bold:!0,children:"slider"})," below to zoom in and out."]}),zoomDataLevel:[[0,e.jsxs(e.Fragment,{children:["A simple ",e.jsx(I,{bold:!0,children:"magnet"})," with a ",e.jsx(d,{type:"magnet-north",italic:!0,children:"positive"})," and ",e.jsx(d,{type:"magnet-south",italic:!0,children:"negative"})," pole."]}),6],[.3,e.jsxs(e.Fragment,{children:["A simple ",e.jsx(I,{bold:!0,children:"magnet"})," with a ",e.jsx(d,{type:"magnet-north",italic:!0,children:"positive"})," and ",e.jsx(d,{type:"magnet-south",italic:!0,children:"negative"})," pole."]}),.65],[.5,e.jsxs(e.Fragment,{children:["Each ",e.jsx(I,{italic:!0,children:"magnet"})," is made of atoms arranged in a ",e.jsx("strong",{children:"very specific, orderly way"}),"."]}),.65],[.7,e.jsxs(e.Fragment,{children:["Each ",e.jsx("strong",{children:"atom"})," in the magnet can be seen as a ",e.jsxs("strong",{children:["tiny arrow-like ",e.jsx(I,{children:"magnet"})]}),", where the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"tip"})," of the arrow indicates the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"north"}),"."]}),.38],[1,e.jsxs(e.Fragment,{children:["Each ",e.jsx("strong",{children:"atom"})," in the magnet can be seen as a ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"tiny arrow-like"})," magnet, where the ",e.jsx("i",{children:"tip"})," of the arrow indicates the ",e.jsx("i",{children:"north"}),"."]}),.38]]}),e.jsx(B,{children:"So... are atoms really tiny magnets?"}),e.jsxs(b,{children:["I mean... ",e.jsx("i",{children:"sort of!"})," In fact, there are two different sources of magnetism in an atom:",e.jsxs("ul",{children:[e.jsxs("li",{children:["Each ",e.jsx("strong",{children:"electron"})," has a property called ",e.jsx(d,{type:"electron",bold:!0,children:"spin"}),". Imagine it as a ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"tiny arrow"})," attached to the electron, pointing in a certain direction ",e.jsx("i",{children:"... although the electron doesn't literally spin"}),". This arrow is then capable of producing its ",e.jsx("i",{children:"own magnetism"}),", just like a tiny magnet."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electrons"})," also ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"move around"})," the nucleus. Since a ",e.jsx("i",{children:"moving electric charge"})," creates ",e.jsx("i",{children:"magnetism"})," (this is what's called ",e.jsx("i",{children:"induction"}),"), this motion also contributes to the atom's overall magnetism."]})]}),"In short, let's simplify and think of ",e.jsx("strong",{children:"atoms"})," as ",e.jsx("strong",{children:"tiny arrow-shaped magnets"}),". The ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"tip"})," of the arrow points to the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"north"}),", and the ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"tail"})," points to the ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"south"}),"."]}),e.jsx(b,{children:"Now, a magnet contains an enormous number of atoms... and even more electrons! So the real question is"}),e.jsxs(B,{children:["How do all these ",e.jsx("strong",{children:"tiny arrows"})," end up ",e.jsx("strong",{children:"working together"}),"? Shouldn't they just point in random directions, canceling each other out? And this is where the magic starts."]}),e.jsx(vt,{title:"Magnets Interaction",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Try to change the orientation of the ",e.jsx(d,{type:"electron",bold:!0,children:"central atom's spin"})," using the ",e.jsx(d,{type:"electron-slider",italic:!0,children:"slider"})," below, and see how the other spins react."]})})}),e.jsxs(b,{children:["As you can see, ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"atom's spins"})," prefer to point in the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"same direction"})," as their neighbors."]}),e.jsxs(Y,{title:"A deeper look",children:[e.jsxs(b,{children:["To understand why, we need to dip into the realm of ",e.jsx("i",{children:"quantum physics"}),". At very small scales, ",e.jsx(d,{type:"particle",bold:!0,children:"particules"})," are not just tiny balls: they are described by a mathematical object called a ",e.jsx(d,{type:"particle",bold:!0,children:"wave function"}),". Think of it as a sort of fuzzy cloud that represents the ",e.jsx(d,{type:"particle",italic:!0,children:"probability"})," of finding the particle at a certain place. Like water waves, two wave functions can interfere, combining to form bigger waves or canceling each other out."]}),e.jsxs(b,{children:["Since ",e.jsx(d,{type:"electron",bold:!0,children:"electrons"})," all carry the same ",e.jsx(d,{type:"electron",italic:!0,children:"negative charge"}),", they repel each other. In a solid, the ",e.jsx("strong",{children:"Pauli exclusion principle"})," forces their wave functions into certain arrangements. In some cases, the lowest-energy state occurs when neighboring ",e.jsx(d,{type:"electron",bold:!0,children:"spins are aligned"}),". This effect is called the ",e.jsx("i",{children:"exchange interactions"}),'. It is not a new "fundamental" force, but rather a consequence of the wave nature of particles and their interactions.']})]}),e.jsxs(Z,{children:["Ok, that's a lot to take in. Let's put on our theorist hat. ",e.jsxs("i",{children:["How could we ",e.jsx("strong",{children:"summarise"})," what we have learnt so far, simplifying as much as possible, without loosing the essence of the physics behind?"]}),e.jsx(G,{}),"Try to think about it a bit. These parts are the real challenge of this article!"]}),e.jsxs(b,{children:["Let's strip this down to its essence. A ",e.jsx(I,{bold:!0,children:"magnet"})," consists of ",e.jsx("i",{children:"many atoms"})," arranged in a ",e.jsx("i",{children:"regular pattern"}),".",e.jsxs("ul",{children:[e.jsxs("li",{children:["Suppose we have ",e.jsxs("i",{children:[e.jsx(M,{children:"N"})," atoms"]}),", that we identify using the letter ",e.jsx(M,{children:"j"})," that runs from ",e.jsx(M,{children:"1"})," to ",e.jsx(M,{children:"N"}),"."]}),e.jsxs("li",{children:["To simplify, we model each atom as a single arrow pointing in a given direction. We call this the atom's ",e.jsx(d,{type:"electron",bold:!0,children:"spin"}),", and write it as ",e.jsx(M,{type:"electron",children:"S_j"}),"."]}),e.jsxs("li",{children:["Let's make it even simpler: Suppose each arrow can only point ",e.jsx(d,{type:"magnet-north",bold:!0,children:"up"})," that we write as ",e.jsx(M,{children:"S_j =\\,"}),e.jsx(d,{type:"magnet-north",children:e.jsx(M,{children:"+1"})}),", or ",e.jsx(d,{type:"magnet-south",bold:!0,children:"down"})," where ",e.jsx(M,{children:"S_j =\\,"}),e.jsx(M,{type:"magnet-south",children:"-1"}),"."]}),e.jsxs("li",{children:["Finally, we describe the evolution of our system over time by saying that each spin prefers to ",e.jsx("strong",{children:"align"})," with its nearest neighbors."]})]})]}),e.jsxs(Y,{title:"Energy minimization",children:[e.jsxs(b,{children:["In physics, a core principle is that systems tend to ",e.jsx("i",{children:"minimize their energy"}),". In our case, the ",e.jsx("strong",{children:"energy"})," of a given atom ",e.jsx(M,{children:"j"})," can be written as",e.jsx(A,{children:"$$ E_j = - J \\sum_{j'\\ \\in\\ \\mathrm{neighbors\\  of\\ } j} S_j\\, S_{j'}, $$"}),"where ",e.jsx(M,{children:"J"})," is a positive constant that represents the ",e.jsx("i",{children:"strength of the interaction between neighboring arrows"}),". From this relation, if ",e.jsx(M,{children:"S_j"})," and ",e.jsx(A,{inline:!0,children:"$S_{j'}$"})," are aligned (both ",e.jsx(M,{type:"magnet-north",children:"+1"})," or both ",e.jsx(M,{type:"magnet-south",children:"-1"}),"), the energy is ",e.jsx("i",{children:"negative"}),", meaning that this configuration is ",e.jsx("i",{children:"better for the system"}),". If they are opposite, the energy is ",e.jsx("i",{children:"positive"}),". This means that, as we wanted, the system ",e.jsx("strong",{children:"prefers to align"})," the ",e.jsx(d,{type:"electron",bold:!0,children:"spins"}),"."]}),e.jsxs(b,{children:["In quantum mechanics, ",e.jsx("strong",{children:"energy minimization"})," is a fundamental principle. Instead of talking about the total energy ",e.jsx(M,{children:"E"})," of the system, we use the letter ",e.jsx(d,{type:"electron",bold:!0,children:"H"})," and call it the ",e.jsx(d,{type:"electron",bold:!0,children:"Hamiltonian"}),". Here, it is the sum of the energies of all the atoms in the system:",e.jsx(A,{children:"$$ H = - J \\sum_{j=1}^N \\sum_{j'\\, \\in\\, \\mathrm{neighbors\\  of\\ } j} S_j\\, S_{j'}. $$"})]})]}),e.jsxs(B,{children:["But how do we actually ",e.jsx("strong",{children:"measure"})," the magnetism of a magnet?"]}),e.jsxs(b,{children:["For this, we need to define the ",e.jsx(I,{italic:!0,children:"total magnetization"})," that we write as ",e.jsx(M,{children:"M"}),", which is what we usually mean when we talk about ",e.jsx("strong",{children:"how strong"})," a magnet is and in ",e.jsx("strong",{children:"which direction"})," it is pointing. It is simply the average of all the spins' orientations, ",e.jsx("i",{children:"a sort of average arrow"}),", defined as",e.jsx(A,{children:"$$ M = \\frac{1}{N} \\sum_{j=1}^N S_j. $$"})]}),e.jsxs(_,{children:["The division by ",e.jsx(M,{children:"N"})," keeps ",e.jsx(M,{children:"M"})," between ",e.jsx(M,{type:"magnet-north",children:"+1"})," and ",e.jsx(M,{type:"magnet-south",children:"-1"}),", making it easy to interpret.  Again, the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"tip"})," of the arrow points to the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"north"}),", and the ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"tail"})," points to the ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"south"}),"."]}),e.jsxs(b,{children:[e.jsx("strong",{children:"And... voil√†!"})," We can now summarize our model into a simple algorithm:",e.jsx(Ce,{items:[e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Pick"})," a random atom ",e.jsx(M,{children:"j"})," anywhere in the grid."]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Consider flipping its arrow"}),", but don't actually do it yet. First, check how this change would affect the system.",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the flip ",e.jsx("i",{children:"increases"})," alignment with neighbors, ",e.jsx("strong",{children:"accept"})," it."]}),e.jsxs("li",{children:["If it ",e.jsx("i",{children:"decreases"})," alignment, ",e.jsx("strong",{children:"reject"})," it."]})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Repeat"})," many times."]})],customWidth:{arrow:"24px",bar:"37px"}})]}),e.jsx(re,{title:"Magnets simulation",description:e.jsxs(b,{children:["This is a ",e.jsx("strong",{children:"simulation"})," of the model we just built. It shows a grid of arrows, each representing an ",e.jsx("i",{children:"atom's spin"}),". A ",e.jsx(d,{type:"magnet-north",children:"red"})," arrow represents a spin pointing ",e.jsx(d,{type:"magnet-north",bold:!0,children:"up"})," (",e.jsx(M,{children:"S_j =\\,"}),e.jsx(M,{type:"magnet-north",children:"+1"}),"), while a ",e.jsx(d,{type:"magnet-south",children:"blue"})," arrow represents a spin pointing ",e.jsx(d,{type:"magnet-south",bold:!0,children:"down"})," (",e.jsx(M,{children:"S_j =\\,"}),e.jsx(M,{type:"magnet-south",children:"-1"}),").",e.jsx(G,{}),"Finally, the ",e.jsx("strong",{children:"big arrow"})," on the side represents the ",e.jsx(I,{italic:!0,bold:!0,children:"total magnetization"})," ",e.jsx(M,{children:"M"})," of the system, which is the average of all the spins' orientations. The ",e.jsx("i",{children:"bigger"})," it is, the ",e.jsx("i",{children:"stronger"})," the magnet."]})}),e.jsxs(b,{children:["Nice, we have our model... ",e.jsx("strong",{children:"or do we really?"})," Let's look at our ",e.jsx(I,{children:"checklist"})," of what we wanted to simulate:",e.jsx(gt,{items:[{label:"North and south poles.",checked:!0,description:"The magnetization, represented by the big arrow."},{label:"Attraction and repulsion between magnets.",checked:!0,description:"If we had another magnet, their big arrows would tend to align together."},{label:"Cutting a magnet in two.",checked:!0,description:"Each half still has its own big arrow, so each is still a magnet."},{label:"Magnets stop working when hot.",checked:!1}]})]}),e.jsx(b,{children:"Shoot! We still have one thing to explain."}),e.jsxs(B,{children:["Why does ",e.jsx(d,{type:"temperature",children:"heating"})," destroy magnetism?"]}),e.jsxs(Z,{children:[e.jsx("i",{children:"That's how theory works!"}),e.jsx("br",{}),"You build a model, see where it matches reality, and then notice where it doesn't. You then try to ",e.jsx("strong",{children:"fix"})," the model by ",e.jsx("strong",{children:"adding new elements"})," that you think will help.",e.jsx(G,{}),e.jsx(G,{}),"So here's your challenge: ",e.jsxs("i",{children:["How would you add ",e.jsx(d,{type:"temperature",children:"temperature"})," to our model? What effect would it have on each arrow?"]})]})]}),e.jsxs(F,{title:"The crucial role of temperature",children:[e.jsxs(b,{children:[e.jsx(d,{type:"temperature",bold:!0,children:"Temperature"}),", that we will write using the letter ",e.jsx(M,{type:"temperature",children:"T"}),", can be thought of as ",e.jsx("i",{children:"shaking the arrows"}),". In this article, we will call it, more generally, ",e.jsx(d,{type:"temperature",bold:!0,children:"noise"}),". The ",e.jsx("i",{children:"higher the temperature"}),", the more the ",e.jsx("i",{children:"spins jostle"}),"."]}),e.jsxs(b,{children:["In our model, to include temperature, we imagine the system evolving according to the following steps:",e.jsx(Ce,{items:[e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Pick"})," a random atom ",e.jsx(M,{children:"j"})," anywhere in the grid."]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Consider flipping its arrow"}),", but don't actually do it yet. First, check how this change would affect the system.",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the flip ",e.jsx("i",{children:"increases"})," alignment with neighbors, ",e.jsx("strong",{children:"accept"})," it."]}),e.jsxs("li",{children:["If it ",e.jsx("i",{children:"decreases"})," alignment, don't reject it outright. Instead, generate a ",e.jsx(d,{type:"temperature",children:"random number"})," that depends on ",e.jsx(M,{type:"temperature",children:"T"}),". At ",e.jsx("i",{children:"higher"})," temperatures, this number is more likely to be ",e.jsx("i",{children:"large"}),". If the random number exceeds a threshold, ",e.jsx("i",{children:"accept it."})," This represents the effect of ",e.jsx(d,{type:"temperature",bold:!0,italic:!0,children:"thermal fluctuations"})," that can sometimes overcome the alignment."]})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Repeat"})," many times."]})]})]}),e.jsx(_,{children:"These algorithms are called Monte-Carlo simulations, powerful methods in physics."}),e.jsxs(b,{children:[e.jsx("i",{children:"Enough theory!"})," Let's see what happens with temperature in practice."]}),e.jsx(re,{title:"Ising Model",description:e.jsxs(b,{children:["The implementation of the above algorithm.",e.jsx("br",{}),"Try to change the ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," using the ",e.jsx(d,{type:"temperature",italic:!0,children:"slider"})," below."]}),useTemperature:!0}),e.jsxs(b,{children:["That's better! At ",e.jsx("i",{children:"high"})," temperature, the arrows are jumbled, and the total magnetization is ",e.jsx("i",{children:"zero"})," as before. However, ",e.jsx("i",{children:"below"})," a certain ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"critical temperature"}),", the arrows suddenly align, and the total magnetization becomes large: ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"we have a magnet"}),"!"]}),e.jsxs(_,{children:["We also observe ",e.jsx("strong",{children:"patches"})," of aligned spins below this critical value. These patches are called ",e.jsx("strong",{children:"magnetic domains"}),",  and are a ",e.jsx("a",{href:"https://en.wikipedia.org/wiki/Magnetic_domain",children:"key feature of real magnets"}),". Our model even made a new prediction that is experimentally found!"]}),e.jsxs(b,{children:["Now, let's try to better characterize what's happening. To do this, we will measure the ",e.jsx(d,{type:"magnet",italic:!0,children:"total magnetization"})," more precisely for different ",e.jsx(d,{type:"temperature",italic:!0,children:"temperatures"})," and plot it on a graph."]}),e.jsx(Ct,{title:"Magnetization temperature variation",description:e.jsxs(b,{children:[e.jsx("strong",{children:"Try clicking"})," on the graph to see how the magnets internal structure changes and how the total magnetization varies with temperature."]})}),e.jsxs(b,{children:["We observe what we saw earlier: there is a ",e.jsx("strong",{children:"sudden change"})," in the magnetization starting from a certain ",e.jsx(d,{type:"temperature",bold:!0,italic:!0,children:"critical temperature"}),":",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(d,{type:"temperature",bold:!0,children:"Below"}),", the magnet is ",e.jsx(d,{type:"magnet",italic:!0,children:"ordered"}),", and ",e.jsx(M,{type:"magnet",children:"M \\simeq \\pm 1"}),". This means that the arrows are aligned, and the magnet ",e.jsx("i",{children:"works"}),"."]}),e.jsxs("li",{children:[e.jsx(d,{type:"temperature",bold:!0,children:"Above"}),", it is ",e.jsx(d,{type:"magnet",italic:!0,children:"disordered"}),", and ",e.jsx(M,{type:"magnet",children:"M \\simeq 0"}),". This means that the arrows are jumbled, and the magnet ",e.jsx("i",{children:"doesn't work"}),"."]})]}),"This process is called a ",e.jsx("strong",{children:"phase transition"}),", and it is a fundamental concept in physics. Here, it explains why magnets stop working when overheated: the ",e.jsx(d,{type:"temperature",italic:!0,children:"thermal fluctuations"})," become so strong that they win compared to the ",e.jsx(d,{type:"magnet",italic:!0,children:"alignment of the arrows"}),", leading to a ",e.jsx("i",{children:"disordered"})," state and killing the magnetism."]}),e.jsxs(_,{children:["The model we used here is called the ",e.jsx("strong",{children:"Ising model"}),". Despite its simplicity, it is a ",e.jsx("strong",{children:"cornerstone"})," of statistical physics and complexity science. A lot of research has been and continues to be conducted on this model and its variants."]}),e.jsxs(b,{children:["There are ",e.jsx("i",{children:"a lot"})," of phase transitions in nature, as we will see in the rest of this article: ",e.jsx("strong",{children:"You even know one!"})," It occurs while boiling water: At 100¬∞C, when the water ",e.jsx("i",{children:"abruptly"})," changes from liquid to a gas."]})]}),e.jsx(X,{}),e.jsxs(F,{children:[e.jsxs(b,{children:["To finish this first part, let me insist again on what we just saw. ",e.jsx(I,{children:"Magnets"})," are made of countless atoms, each with its own tiny magnetic ",e.jsx(d,{type:"electron",bold:!0,children:"arrow"})," that we call ",e.jsx(d,{type:"electron",bold:!0,children:"spin"}),".",e.jsx(G,{}),e.jsx(G,{}),"A priori, we expected that these arrows would point in ",e.jsx("strong",{children:"random directions"}),", canceling each other out. However, this is only what happens at ",e.jsx(d,{type:"temperature",bold:!0,children:"high"})," temperature. ",e.jsx(d,{type:"temperature",bold:!0,children:"Below"})," a certain temperature, the atoms' spins suddenly start to ",e.jsx("strong",{children:"cooperate and work together"}),", aligning themselves in the same direction and as a result producing what we usually call ",e.jsx(I,{italic:!0,bold:!0,children:"magnets"}),". This sudden change is called a ",e.jsx("strong",{children:"phase transition"})," and is a fundamental concept in physics."]}),e.jsx(re,{title:"Ising Model",useTemperature:!0}),e.jsxs(b,{children:["We saw that even with constant ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"}),", a ",e.jsx("strong",{children:"collective order"})," can emerge. This is a key idea in the ",e.jsx("i",{children:"science of complexity"}),":"]}),e.jsxs(Ne,{children:[e.jsx(I,{bold:!0,children:"Simple rules"})," at the scale of a ",e.jsx("i",{children:"few individuals"})," can give rise to rich and ",e.jsx(I,{bold:!0,children:"complex"})," organizational patterns at ",e.jsx("i",{children:"large scales"}),"."]})]})]})}function It(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Ee(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function Rt(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function Et(t,n,s,a,u){return t.map(l=>(l-n)*(u-a)/(s-n)+a)}function Pt(t,n,s,a,u){const c=[...t.posList],h=[...t.velList],i=[...t.thetaList];if(u==null){const o=new Array(c.length).fill(0).map(()=>[]);c.forEach((m,f)=>{c.forEach((x,g)=>{if(f!==g){const p=Math.abs(m[0]-x[0]),w=Math.abs(m[1]-x[1]),y=p>.5?1-p:p,v=w>.5?1-w:w;Math.hypot(y,v)<.1&&o[f].push(g)}})}),i.forEach((m,f)=>{const x=o[f];if(x.length>0){const g=x.reduce((p,w)=>{const y=i[w];return p+Math.sin(y-m)},0)/x.length;i[f]=m+s*g+Math.sqrt(n)*.1*Rt(0,10)*a}i[f]=(i[f]+2*Math.PI)%(2*Math.PI)})}else i.forEach((r,o)=>{i[o]=r,i[o]=(i[o]+2*Math.PI)%(2*Math.PI)});return c.forEach((r,o)=>{const m=t.velList[o],f=i[o];r[0]+=m*a*Math.cos(f),r[1]+=m*a*Math.sin(f),r[0]=(r[0]+1)%1,r[1]=(r[1]+1)%1}),[c,h,i]}function Ft(t,n,s,a,u,l){if(t.fillStyle="#f0f3fdff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),!a)s.posList.forEach((c,h)=>{const i=Ee(c,n),r=s.thetaList[h];t.lineWidth=2,t.strokeStyle="#062758ff";const o=15;t.lineWidth=2,t.fillStyle="#062758ff";const m=o*1;It(t,i.x,i.y,i.x+m*Math.cos(r),i.y+m*Math.sin(r),4)});else{const c=new Path2D("m 0,-55.361361 c -7.233624,0 -10.636408,16.309314 -11.276832,32.038875 0,0 -10.724855,13.7182701 -7.731827,16.9607201 2.298053,2.48955 6.066415,-3.9166901 7.692553,-7.0259301 0.124074,3.6295296 0.402629,7.0012301 0.819589,9.8603801 1.724739,11.82679 4.520187,26.0693599 7.10159,38.7227599 -0.728472,2.83258 -0.274272,5.35692 -2.141686,6.45639 -7.700014,4.53352 -12.889653,4.97487 -12.889653,10.10843 0,5.72617 14.482276,5.31951 18.426266,0.85421 3.94399,4.4653 18.426265,4.87196 18.426265,-0.85421 0,-5.13356 -5.189632,-5.57491 -12.889653,-10.10843 -1.86741,-1.09947 -1.912058,-3.87323 -2.32875,-6.39403 2.5814,-12.6534 5.563913,-26.9583299 7.288654,-38.7851199 0.41696,-2.85915 0.695509,-6.2308505 0.819589,-9.8603801 1.62613,3.10924 5.394503,9.5154801 7.692553,7.0259301 2.99303,-3.24245 -7.731827,-16.9607201 -7.731827,-16.9607201 C 10.636411,-39.052049 7.23363,-55.361361 0,-55.361361 Z");s.posList.forEach((h,i)=>{const r=Et(h,0,1,-.05,1.05);t.save();const o=Ee(r,n),m=s.thetaList[i];t.translate(o.x,o.y);let f=u==null?.25:.15;l&&(f=.15),t.scale(f,f),t.rotate(m+1.7),t.fillStyle="#062758ff",t.fill(c),t.restore()})}}function At(t,n,s,a,u,l,c,h,i){let o=c==null?20:13;h&&(o=16);const[m,f]=[o,Math.floor(o/n)];let x=j.useRef(new Array(o).fill(!1).map(()=>[0,0])),g=j.useRef(new Array(o).fill(!1).map(()=>0)),p=j.useRef(new Array(o).fill(!1).map(()=>0)),w=j.useMemo(()=>Math.random()*2*Math.PI,[]);j.useMemo(()=>{const y=new Array(m*f).fill(!1).map(()=>[Math.random(),Math.random()]),v=new Array(m*f).fill(!1).map(()=>.2*(.4+Math.random()*.4));x.current=y,g.current=v},[]),j.useMemo(()=>{const y=new Array(m*f).fill(!1).map(()=>c==null?Math.random()*2*Math.PI:Math.random()<c?w:Math.random()*2*Math.PI);p.current=y},[c]),j.useEffect(()=>{if(!i)return;const y=t.current;y||C(new Error("Canvas reference is null (Kuramoto simulation)"));const v=y,L=window.devicePixelRatio||1,S=v.getBoundingClientRect(),k=S.width*L,N=S.height*L;v.width=k,v.height=N;const T=v.getContext("2d");T||C(new Error("Canvas context is null (Kuramoto simulation)"));const R=T;let P,V=new Date().getTime();const W=()=>{const z=new Date().getTime(),K=(z-V)/1e3;V=z,[x.current,g.current,p.current]=Pt({posList:x.current,thetaList:p.current,velList:g.current},s,a,K,c),Ft(R,{width:k,height:N},{posList:x.current,velList:g.current,thetaList:p.current},l,c,h),P=window.requestAnimationFrame(W)};return W(),()=>{window.cancelAnimationFrame(P)}},[t,i])}function le(t){const[n,s]=j.useState(!1),[a,u]=j.useState(10),[l,c]=j.useState(!0),[h,i]=j.useState(.3),r=j.createRef(),o=j.useMemo(()=>16/9,[]);j.useMemo(()=>{t.showSliders||(u(7),i(1.5))},[t.showSliders]),At(r,o,a,h/50,t.showSliders,l,t.synchronisation,t.conclusion,n);let m=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fish-custom-check-g-container",children:e.jsxs("div",{className:"fish-custom-check-container",children:[e.jsx("label",{htmlFor:"show-arrows",children:"Arrows"}),e.jsx("input",{type:"checkbox",checked:!l,onChange:f=>c(!f.target.checked)})]})}),e.jsx($,{label:e.jsx(e.Fragment,{children:"Interaction"}),value:h,onChange:i,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1}),e.jsx($,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†¬†¬†¬†¬†¬†Noise"}),value:a,onChange:u,min:0,max:20,step:.01,color:"#6a5ff7",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${o}`,title:t.title,description:t.description,controls:t.showSliders?m:e.jsx(e.Fragment,{}),canvasRef:r,onChangeVisibleState:s,is2D:!0})}function ce({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function $t(t,n,s){const a=n.current?.clientWidth||100,l=Math.min(a*.8,380);t.current.setAttribute("width",a.toString()),t.current.setAttribute("height",l.toString());const c={top:20,right:20,bottom:45,left:50},h=a-c.left-c.right,i=l-c.top-c.bottom,r=fe(t.current).append("svg").attr("width",h+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("transform",`translate(${c.left},${c.top})`),o=v=>{if(v>1){const L=(v-1)*.8-1;return Math.sqrt(1-L*L)}return 0},m=J().domain([0,2]).range([0,h]).nice(),f=J().domain([-.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(pe(m).ticks(h/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(f).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",h/2).attr("y",i+c.bottom-5).attr("fill","#12a02a").attr("font-size","16px").attr("font-weight","bold").text("Interaction strength"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#2c2c2cff").attr("font-weight","bold").attr("font-size","16px").text("Synchronisation Amount");const x=we().x(v=>m(v.x)).y(v=>f(v.y));r.append("path").attr("fill","none").attr("stroke","#2c2c2cff").attr("stroke-width",4.5).attr("d",x(oe(0,2,.001).map(v=>({x:v,y:o(v)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#12a02a").attr("display","unset").attr("cx",g).attr("cy",f(o(p)));s(o(p));const y=r.append("line").attr("class","hover-line").attr("stroke","#12a02a").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",h).attr("height",i).attr("fill","transparent").on("mousemove",function(v){const[L,S]=xe(v),k=f.invert(S);if(k>=-1&&k<=1){const N=m.invert(L);y.attr("x1",L).attr("y1",0).attr("x2",L).attr("y2",i);const T=o(N);w.attr("display","unset").attr("cx",L).attr("cy",f(T)),s(T<.001?Math.random()*1e-5:T)}})}function _t(t){const n=j.useRef(null),s=j.useRef(null),[a,u]=j.useState(0),l=j.useMemo(()=>e.jsx(le,{showSliders:!1,synchronisation:a}),[a]);return j.useEffect(()=>{$t(s,n,u)},[s]),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:ce,onError:C,children:e.jsxs("div",{className:"fish-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"fish-graph-simulation-container",children:[e.jsx("div",{ref:n,className:"kuramoto-graph-canvas-container-svg",children:e.jsx(E,{FallbackComponent:ce,onError:C,children:e.jsx("svg",{width:460,height:400,ref:s})})}),e.jsx("div",{className:"fish-graph-canvas-container",children:e.jsx(E,{FallbackComponent:ce,onError:C,children:l})})]})]})})})}function D(t){return e.jsx(Le,{from:[50,92,180],to:[189,56,219],bold:t.bold,italic:t.italic,children:t.children})}function zt(){return e.jsxs(ne,{title:"...to the coordinated swimming of fishes",children:[e.jsxs(F,{title:"Fish schools",children:[e.jsxs(b,{children:["Let me start by telling you that ",e.jsx(D,{children:"fishes"})," and ",e.jsx(O,{children:"fireflies"})," are the... ",e.jsx("strong",{children:"same thing"}),"!"]}),e.jsx(B,{children:"Wait, what? I'm not really sure about that..."}),e.jsxs(b,{children:["Okay, ",e.jsx("i",{children:"not really"}),", I agree. Still, let's look at their similarities. In nature, fishes in oceans often travel in ",e.jsx("strong",{children:"schools"}),", meaning that they move together in a coordinated manner."]}),e.jsx(le,{showSliders:!1}),e.jsxs(Z,{children:["Now, you guessed it, how can we modify our previous model to describe this behavior?",e.jsx("br",{}),"And how can we characterize the ",e.jsx("i",{children:"schooliness"})," of fishes?"]})]}),e.jsxs(F,{title:"The Vicsek model",children:[e.jsxs(b,{children:["Let's start by recalling what the two previous models were about. Each atom's spin  or firefly was an ",e.jsx(d,{type:"electron",bold:!0,children:"arrow"})," that wanted to ",e.jsx(d,{type:"electron",italic:!0,children:"align"})," with its neighbors. It however also had to fight against ",e.jsx(d,{type:"temperature",bold:!0,children:"noise"})," that randomly changed its orientation. Note that in the Kuramoto model, these arrows were also constantly ",e.jsx("i",{children:"rotating"}),"."]}),e.jsxs(b,{children:["Reinterpreting these models, we introduce the Vicsek model:",e.jsxs("ul",{children:[e.jsxs("li",{children:["The ",e.jsx(d,{type:"electron",bold:!0,children:"arrows"})," are no longer spins of atoms or fireflies, but rather ",e.jsx(D,{bold:!0,italic:!0,children:"fishes"}),", and they do no longer rotate anymore over time. The ",e.jsx(d,{type:"magnet-north",children:"head"})," of the arrow is the ",e.jsx(d,{type:"magnet-north",children:"fish head"}),", and the ",e.jsx(d,{type:"magnet-south",children:"tail"})," is... its ",e.jsx(d,{type:"magnet-south",children:"tail"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(D,{bold:!0,children:"fishes"})," can move freely in space."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"temperature",bold:!0,children:"noise"})," again represents ",e.jsx("i",{children:"how much the arrows is shaken"})," around, that is how much the fishes are ",e.jsx(d,{type:"temperature",children:"independent"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction strength"})," is now how strongly a given fish wants to ",e.jsx(d,{type:"coupling",children:"align"})," with its neighbors."]})]}),"Finally, the equation that describes how the angle ",e.jsx(M,{children:"\\color{electron}{\\theta}_j"})," of a given fish ",e.jsx(M,{children:"j"})," evolves over time is",e.jsx(A,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}.$$"})]}),e.jsxs(_,{children:["Note how we only changed our view again, and that the ",e.jsx("strong",{children:"equation stayed"})," (",e.jsx("i",{children:"almost"}),") ",e.jsx("strong",{children:"exactly the same"}),"!"]}),e.jsx(Y,{title:"Velocity and position update",children:e.jsxs(b,{children:["The way we handle the ",e.jsx(d,{type:"magnet",bold:!0,children:"movement"})," of the fishes is a bit more complex than just updating their angle. At each time, we first update each ",e.jsx(M,{children:"\\color{electron}{\\theta}_j"})," of every fish, and then update their ",e.jsx(d,{type:"magnet",bold:!0,children:"position"})," ",e.jsx(M,{children:"\\color{magnet}{\\mathbf{r}}_j"}),", according to the relation",e.jsx(A,{children:"$$ \\color{magnet}{\\mathbf{r}}_j(t + \\Delta t) = \\color{magnet}{\\mathbf{r}}_j(t) + v_0 \\Delta t \\left( \\cos \\color{electron}{\\theta}_j(t),\\, \\sin \\color{electron}{\\theta}_j(t) \\right),$$"}),"where we assume that each fish swims at a constant speed ",e.jsx(M,{children:"v_0"}),". Without entering into too many details, this update scheme is very typical in simulations. It is called the ",e.jsx("i",{children:"Euler method"}),", and can be directly derived from Newton's laws of motion."]})}),e.jsx(le,{showSliders:!0,title:"Fish schools",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Here is a simulation of the ",e.jsx("i",{children:"Vicsek model"}),". You can change the ",e.jsx(d,{type:"coupling",children:"interaction strength"})," and ",e.jsx(d,{type:"temperature",children:"noise"})," using the sliders. You can also toggle the display of the internal structure of the fishes (the ",e.jsx(d,{type:"electron",children:"arrows"}),") using the checkbox."]})})}),e.jsxs(Z,{children:["Time from your last job of the day! Try to change the ",e.jsx("i",{children:"interaction strength"})," and see how it affects the behavior of the fish school. How could we ",e.jsx("i",{children:"characterize"})," this effect more precisely?"]})]}),e.jsxs(F,{title:"Characterizing the schooliness of fishes",children:[e.jsxs(b,{children:["As you can see, the fishes start to swim in a ",e.jsx("strong",{children:"coordinated"})," manner when the ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction strength"})," is ",e.jsx(d,{type:"coupling",italic:!0,children:"above"})," a certain threshold. To characterize this flocking behavior, we can take a look at the ",e.jsx(d,{type:"electron",children:"average direction"})," of the fishes, the same way as before."]}),e.jsxs(b,{children:["We again define a ",e.jsx(d,{type:"electron",bold:!0,children:"mean arrow"})," following the same procedure that we already did two times! The  ",e.jsx(d,{type:"electron",children:"length"})," of the arrow now tells us how coordinated the fishes are:",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the length is close to ",e.jsx(d,{type:"magnet-north",children:"one"}),", they are all swimming in the ",e.jsx(d,{type:"magnet-north",italic:!0,children:"same direction"}),"."]}),e.jsxs("li",{children:["If the length is close to ",e.jsx(d,{type:"magnet-south",children:"zero"}),", they are swimming ",e.jsx(d,{type:"magnet-south",italic:!0,children:"independently"}),"."]})]}),"Finally, you know the deal, let's plot how this ",e.jsx("strong",{children:"order parameter"})," evolves as a function of the interaction strength."]}),e.jsx(_,{children:"We could also plot it as a function of the noise strength: the two values are directly related!"}),e.jsx("div",{style:{height:"25px"}}),e.jsx(_t,{}),e.jsxs(b,{children:["What we observe is a sudden change in the coordination amount at a certain amount of interaction strength... again! ",e.jsx(d,{type:"magnet-south",children:"Above"})," this threshold, fishes swim in a ",e.jsx(d,{type:"magnet-south",italic:!0,children:"coordinated"})," manner, while ",e.jsx(d,{type:"magnet-north",children:"below"})," it, they swim ",e.jsx(d,{type:"magnet-north",italic:!0,children:"independently"}),"... again!"]})]}),e.jsx(X,{}),e.jsx(F,{children:e.jsxs(b,{children:["This, is a ",e.jsx("strong",{children:"phase transition"}),"... again! With just a slightly different model, but with a new physical interpretation, how awesome is that? Alright, we could go on with other variations or model applications, but I think you get the point: it's time to wrap up this article."]})})]})}function Dt(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Pe(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function ae(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function qt(t,n,s){return t.map((a,u)=>a+(n[u]-a)*s)}function Vt(t,n,s,a,u){return t.map(l=>(l-n)*(u-a)/(s-n)+a)}function Bt(t,n,s,a,u,l){const i=[...t.posList],r=[...t.velList],o=[...t.thetaList],m=[...t.tickingList];if(l==null){const g=new Array(i.length).fill(0).map(()=>[]);i.forEach((p,w)=>{i.forEach((y,v)=>{if(w!==v){const L=Math.abs(p[0]-y[0]),S=Math.abs(p[1]-y[1]),k=L>.5?1-L:L,N=S>.5?1-S:S;Math.hypot(k,N)<.3&&g[w].push(v)}})}),o.forEach((p,w)=>{const y=g[w],v=t.omegaList[w];if(y.length>0){const k=y.reduce((N,T)=>{const R=o[T];return N+Math.sin(R-p)},0)/y.length;o[w]=p+v*u+s*k+Math.sqrt(n)*.1*ae(0,10)*u,a||(o[w]=0)}o[w]=(o[w]+2*Math.PI)%(2*Math.PI);const L=.1,S=3*Math.PI/2;o[w]>S-L&&o[w]<S+L&&(m[w]=1),m[w]>0&&(m[w]-=2*u,m[w]<0&&(m[w]=0))})}else o.forEach((x,g)=>{const p=t.omegaList[g];o[g]=x+p*u,o[g]=(o[g]+2*Math.PI)%(2*Math.PI);const w=.1,y=3*Math.PI/2;o[g]>y-w&&o[g]<y+w&&(m[g]=1),m[g]>0&&(m[g]-=2*u,m[g]<0&&(m[g]=0))});const f=.02;return i.forEach((x,g)=>{const p=t.velList[g];x[0]+=p[0]*u,x[1]+=p[1]*u,x[0]=(x[0]+1)%1,x[1]=(x[1]+1)%1;let w=Math.hypot(p[0],p[1]);p[0]+=f*ae(0,3)*u,p[1]+=f*ae(0,3)*u,p[0]=p[0]/Math.hypot(p[0],p[1])*w,p[1]=p[1]/Math.hypot(p[0],p[1])*w}),[i,r,o,m]}function Ot(t,n,s,a,u,l,c){if(t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),!u)s.posList.forEach((h,i)=>{const r=Pe(h,n),o=s.thetaList[i],m=a[i]>0,f=qt([216,216,216],[255,49,49],a[i]),x=`rgba(${f[0]}, ${f[1]}, ${f[2]}, 1.0)`,g=`rgba(255, 126, 126, ${a[i]*.9})`;t.lineWidth=2,t.strokeStyle=m?x:"rgba(216, 216, 216, 1)",t.fillStyle=m?g:"rgba(255, 255, 255, 0.0)",t.beginPath();const p=15;t.arc(r.x,r.y,p,0,2*Math.PI),t.stroke(),t.fill(),t.lineWidth=1,t.fillStyle=m?x:"white";const w=p*.81;Dt(t,r.x,r.y,r.x+w*Math.cos(o),r.y+w*Math.sin(o),3)});else{const h=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),i=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),r=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),o=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");s.posList.forEach((m,f)=>{const x=Vt(m,0,1,-.05,1.05);t.save();const g=Pe(x,n),p=s.velList[f],w=Math.atan2(p[1],p[0]),y=a[f]>0,v=`rgba(255, 190, 14, ${a[f]*1})`,L="rgba(10, 10, 10, 1.0)";t.translate(g.x,g.y);let S=l!=null?.2:.3;c&&(S=.15),t.scale(S,S),t.rotate(w+1.5),y&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=v,t.fill()),t.filter="none",t.fillStyle=L,t.strokeStyle=L,t.stroke(h),t.fill(h),t.lineWidth=2,t.strokeStyle=L,t.fillStyle="#b4b4b425",t.stroke(i),t.stroke(r),t.fill(i),t.fill(r),t.fillStyle=y?v:"rgba(77, 77, 77, 0.2)",t.strokeStyle=L,t.stroke(o),t.fill(o),t.restore()})}}function Wt(t,n,s,a,u,l,c,h,i,r){let m=h==null?12:10;i&&(m=9);const[f,x]=[m,Math.floor(m/n)];let g=j.useRef(new Array(m).fill(!1).map(()=>[0,0])),p=j.useRef(new Array(m).fill(!1).map(()=>[0,0])),w=j.useRef(new Array(m).fill(!1).map(()=>0)),y=j.useRef(new Array(m).fill(!1).map(()=>0)),v=j.useRef(new Array(m).fill(!1).map(()=>0));j.useMemo(()=>{const L=new Array(f*x).fill(!1).map(()=>[Math.random(),Math.random()]),S=new Array(f*x).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]);g.current=L,p.current=S},[]),j.useMemo(()=>{const L=new Array(f*x).fill(!1).map(()=>h==null?c?ae(3,.2):0:Math.random()<h?4:Math.random()*6),S=new Array(f*x).fill(!1).map(()=>h==null?Math.random()*2*Math.PI:Math.random()<h?.2:Math.random()*2*Math.PI),k=new Array(f*x).fill(0);w.current=L,y.current=S,v.current=k},[h]),j.useEffect(()=>{if(!r)return;const L=t.current;L||C(new Error("Canvas reference is null (Kuramoto simulation)"));const S=L,k=window.devicePixelRatio||1,N=S.getBoundingClientRect(),T=N.width*k,R=N.height*k;S.width=T,S.height=R;const P=S.getContext("2d");P||C(new Error("Canvas context is null (Kuramoto simulation)"));const V=P;let W,z=new Date().getTime();const K=()=>{const Q=new Date().getTime(),ie=(Q-z)/1e3;z=Q,[g.current,p.current,y.current,v.current]=Bt({posList:g.current,thetaList:y.current,velList:p.current,omegaList:w.current,tickingList:v.current},s,a,c,ie,h),Ot(V,{width:T,height:R},{posList:g.current,velList:p.current,thetaList:y.current},v.current,l,h,i),W=window.requestAnimationFrame(K)};return K(),()=>{window.cancelAnimationFrame(W)}},[t,r,h])}function ee(t){const[n,s]=j.useState(!1),[a,u]=j.useState(7),[l,c]=j.useState(!0),[h,i]=j.useState(.3),r=j.createRef(),o=j.useMemo(()=>16/9,[]);j.useMemo(()=>{t.showSliders||(u(7),i(1.5))},[t.showSliders]),Wt(r,o,a,h/50,t.showSliders,l,t.omegaActivated,t.fakeSynchronisation,t.conclusion,n);let m=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"custom-check-g-container",children:e.jsxs("div",{className:"custom-check-container",children:[e.jsx("label",{htmlFor:"show-arrows",children:"Arrows"}),e.jsx("input",{type:"checkbox",checked:!l,onChange:f=>c(!f.target.checked)})]})}),e.jsx($,{label:e.jsx(e.Fragment,{children:"Interaction"}),value:h,onChange:i,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1}),e.jsx($,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†¬†¬†¬†¬†¬†Noise"}),value:a,onChange:u,min:0,max:15,step:.01,color:"#6a5ff7",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${o}`,title:t.title,description:t.description,controls:t.showSliders?m:e.jsx(e.Fragment,{}),canvasRef:r,onChangeVisibleState:s,is2D:!0})}function Ht(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Fe(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function Kt(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function Gt(t,n,s,a){const c=[...t.posList],h=[...t.velList],i=[...t.thetaList],r=[...t.tickingList];return i.forEach((o,m)=>{const f=t.omegaList[m];i[m]=o+f*a+Math.sqrt(n)*.1*Kt(0,12)*a,i[m]=(i[m]+2*Math.PI)%(2*Math.PI);const x=.1,g=3*Math.PI/2;i[m]>g-x&&i[m]<g+x&&(r[m]=1),r[m]>0&&(r[m]-=2*a,r[m]<0&&(r[m]=0))}),[c,h,i,r]}function Zt(t,n,s,a,u){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height);const l=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),c=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),h=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),i=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");s.posList.forEach((r,o)=>{t.save();const m=Fe(r,n),f=-1.5,x=a[o]>0,g=`rgba(255, 190, 14, ${a[o]*1})`,p="rgba(10, 10, 10, 1.0)";t.translate(m.x,m.y),t.scale(1.2,1.2),t.rotate(f+1.5),x&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=g,t.fill()),t.filter="none",t.fillStyle=p,t.strokeStyle=p,t.stroke(l),t.fill(l),t.lineWidth=2,t.strokeStyle=p,t.fillStyle="#b4b4b425",t.stroke(c),t.stroke(h),t.fill(c),t.fill(h),t.fillStyle=x?g:"rgba(77, 77, 77, 0.2)",t.strokeStyle=p,t.stroke(i),t.fill(i),t.restore()}),s.posList.forEach((r,o)=>{const m=Fe(r,n),f=s.thetaList[o];t.lineWidth=2,t.strokeStyle="rgba(216, 216, 216, 1)",t.fillStyle="rgba(255, 255, 255, 0.0)",t.beginPath();const x=100;t.arc(m.x,m.y,x,0,2*Math.PI),t.stroke(),t.fill(),t.lineWidth=3,t.fillStyle="white";const g=x*.81;Ht(t,m.x,m.y,m.x+g*Math.cos(f),m.y+g*Math.sin(f),10)})}function Yt(t,n,s,a,u,l){let c=j.useMemo(()=>{const[f,x]=[1,1],g=new Array(f*x).fill(!1).map(()=>[.48,.48]),p=new Array(f*x).fill(!1).map(()=>[0,0]),w=new Array(f*x).fill(!1).map(()=>3),y=new Array(f*x).fill(!1).map(()=>Math.random()*2*Math.PI),v=new Array(f*x).fill(0);return{Nx:f,Ny:x,posList:g,velList:p,omegaList:w,thetaList:y,tickingList:v}},[]),h=j.useRef(c.posList),i=j.useRef(c.velList),r=j.useRef(c.omegaList),o=j.useRef(c.thetaList),m=j.useRef(c.tickingList);j.useEffect(()=>{if(!l)return;const f=t.current;f||C(new Error("Canvas reference is null (Kuramoto simulation)"));const x=f,g=window.devicePixelRatio||1,p=x.getBoundingClientRect(),w=p.width*g,y=p.height*g;x.width=w,x.height=y;const v=x.getContext("2d");v||C(new Error("Canvas context is null (Kuramoto simulation)"));const L=v;let S,k=new Date().getTime();const N=()=>{const T=new Date().getTime(),R=(T-k)/1e3;k=T,[h.current,i.current,o.current,m.current]=Gt({Nx:c.Nx,Ny:c.Ny,posList:h.current,thetaList:o.current,velList:i.current,omegaList:r.current,tickingList:m.current},s,a,R),Zt(L,{width:w,height:y},{Nx:c.Nx,Ny:c.Ny,posList:h.current,velList:i.current,thetaList:o.current},m.current),S=window.requestAnimationFrame(N)};return N(),()=>{window.cancelAnimationFrame(S)}},[t,l])}function Jt(t){const[n,s]=j.useState(!1),[a,u]=j.useState(4),[l,c]=j.useState(!0),h=j.createRef(),i=j.useMemo(()=>16/6,[]);Yt(h,i,a,1,l,n);let r=e.jsx(e.Fragment,{children:e.jsx($,{label:"Noise",value:a,onChange:u,min:0,max:40,step:.01,color:"#6a5ff7",displayValue:!1})});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:h,onChangeVisibleState:s,is2D:!0})}function Ae(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function Ut(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function Ge(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function Xt(t,n,s,a){const c=t.posList,h=[...t.velList],i=[...t.thetaList],r=[...t.tickingList],o=.3,m=new Array(c.length).fill(0).map(()=>[]);return c.forEach((f,x)=>{c.forEach((g,p)=>{if(x!==p){const w=Math.abs(f[0]-g[0]),y=Math.abs(f[1]-g[1]),v=w>.5?1-w:w,L=y>.5?1-y:y;Math.hypot(v,L)<o&&m[x].push(p)}})}),i.forEach((f,x)=>{const g=m[x],p=t.omegaList[x];if(g.length>0){const v=g.reduce((L,S)=>{const k=i[S];return L+Math.sin(k-f)},0)/g.length;i[x]=f+p*a+s*v+Math.sqrt(n)*.1*Ge(0,10)*a}i[x]=(i[x]+2*Math.PI)%(2*Math.PI);const w=.1,y=3*Math.PI/2;i[x]>y-w&&i[x]<y+w&&(r[x]=1),r[x]>0&&(r[x]-=2*a,r[x]<0&&(r[x]=0))}),[c,h,i,r]}function Qt(t,n,s,a){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height);const u=150,l=Ut([.5,.5],n);if(s.posList.forEach((i,r)=>{const o=s.thetaList[r];t.lineWidth=8,t.fillStyle="rgba(214, 182, 0, 0.23)",t.strokeStyle=t.fillStyle,Ae(t,l.x,l.y,l.x+u*Math.cos(o),l.y+u*Math.sin(o),15)}),a){const i=s.thetaList.reduce((g,p)=>[g[0]+Math.cos(p),g[1]+Math.sin(p)],[0,0]),r=Math.hypot(i[0],i[1])/s.thetaList.length,o=r*.95,m=Math.atan2(i[1],i[0]);t.lineWidth=(1-r)*3+r*12,t.strokeStyle="rgba(255, 255, 255, 1)",t.fillStyle="rgba(255, 255, 255, 1)";const f=l.x+u*o*Math.cos(m),x=l.y+u*o*Math.sin(m);Ae(t,l.x,l.y,f,x,(1-r)*5+r*21)}const c=u*1.1;t.beginPath(),t.arc(l.x,l.y,c,0,2*Math.PI),t.strokeStyle="rgba(255, 255, 255, 1)",t.lineWidth=4,t.stroke();const h=6;t.beginPath(),t.arc(l.x,l.y,h,0,2*Math.PI),t.fillStyle="rgba(255, 255, 255, 1)",t.fill()}function en(t,n,s,a,u,l){let h=j.useMemo(()=>{const[g,p]=[15,Math.floor(15/n)],w=new Array(g*p).fill(!1).map(()=>[Math.random(),Math.random()]),y=new Array(g*p).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]),v=new Array(g*p).fill(!1).map(()=>Ge(1,.1)),L=new Array(g*p).fill(!1).map(()=>Math.random()*2*Math.PI),S=new Array(g*p).fill(0);return{Nx:g,Ny:p,posList:w,velList:y,omegaList:v,thetaList:L,tickingList:S}},[]),i=j.useRef(h.posList),r=j.useRef(h.velList),o=j.useRef(h.omegaList),m=j.useRef(h.thetaList),f=j.useRef(h.tickingList);j.useEffect(()=>{if(!l)return;const x=t.current;x||C(new Error("Canvas reference is null (Kuramoto simulation)"));const g=x,p=window.devicePixelRatio||1,w=g.getBoundingClientRect(),y=w.width*p,v=w.height*p;g.width=y,g.height=v;const L=g.getContext("2d");L||C(new Error("Canvas context is null (Kuramoto simulation)"));const S=L;let k,N=new Date().getTime();const T=()=>{const R=new Date().getTime(),P=(R-N)/1e3;N=R,[i.current,r.current,m.current,f.current]=Xt({Nx:h.Nx,Ny:h.Ny,posList:i.current,thetaList:m.current,velList:r.current,omegaList:o.current,tickingList:f.current},s,a,P),Qt(S,{width:y,height:v},{Nx:h.Nx,Ny:h.Ny,posList:i.current,velList:r.current,thetaList:m.current},u),k=window.requestAnimationFrame(T)};return T(),()=>{window.cancelAnimationFrame(k)}},[t,l])}function $e(t){const[n,s]=j.useState(!1),[a,u]=j.useState(2),[l,c]=j.useState(.1),h=j.createRef(),i=j.useMemo(()=>16/10,[]);en(h,i,a,l/50*.9,t.drawOrderParameter,n);let r=e.jsxs(e.Fragment,{children:[e.jsx($,{label:e.jsx(e.Fragment,{children:"Interaction"}),value:l,onChange:c,min:0,max:1,step:.001,color:"#12a02a",displayValue:!1}),e.jsx($,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†¬†¬†¬†¬†¬†Noise"}),value:a,onChange:u,min:0,max:6,step:.01,color:"#6a5ff7",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:h,onChangeVisibleState:s,is2D:!0})}function he({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function tn(t,n,s){const a=n.current?.clientWidth||100,l=Math.min(a*.8,380);t.current.setAttribute("width",a.toString()),t.current.setAttribute("height",l.toString());const c={top:20,right:20,bottom:45,left:50},h=a-c.left-c.right,i=l-c.top-c.bottom,r=fe(t.current).append("svg").attr("width",h+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("transform",`translate(${c.left},${c.top})`),o=v=>{if(v>1){const L=(v-1)*.8-1;return Math.sqrt(1-L*L)}return 0},m=J().domain([0,2]).range([0,h]).nice(),f=J().domain([-.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(pe(m).ticks(h/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(f).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",h/2).attr("y",i+c.bottom-5).attr("fill","#12a02a").attr("font-size","16px").attr("font-weight","bold").text("Interaction strength"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#2c2c2cff").attr("font-weight","bold").attr("font-size","16px").text("Synchronisation amount");const x=we().x(v=>m(v.x)).y(v=>f(v.y));r.append("path").attr("fill","none").attr("stroke","#2c2c2cff").attr("stroke-width",4.5).attr("d",x(oe(0,2,.001).map(v=>({x:v,y:o(v)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#12a02a").attr("display","unset").attr("cx",g).attr("cy",f(o(p)));s(o(p));const y=r.append("line").attr("class","hover-line").attr("stroke","#12a02a").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",h).attr("height",i).attr("fill","transparent").on("mousemove",function(v){const[L,S]=xe(v),k=f.invert(S);if(k>=-1&&k<=1){const N=m.invert(L);y.attr("x1",L).attr("y1",0).attr("x2",L).attr("y2",i);const T=o(N);w.attr("display","unset").attr("cx",L).attr("cy",f(T)),s(T<.001?Math.random()*1e-5:T)}})}function nn(t){const n=j.useRef(null),s=j.useRef(null),[a,u]=j.useState(0),l=j.useMemo(()=>e.jsx(ee,{showSliders:!1,omegaActivated:!0,fakeSynchronisation:a}),[a]);return j.useEffect(()=>{tn(s,n,u)},[s]),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:he,onError:C,children:e.jsxs("div",{className:"kuramoto-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"kuramoto-graph-simulation-container",children:[e.jsx("div",{ref:n,className:"kuramoto-graph-canvas-container-svg",children:e.jsx(E,{FallbackComponent:he,onError:C,children:e.jsx("svg",{width:460,height:400,ref:s})})}),e.jsx("div",{className:"kuramoto-graph-canvas-container",children:e.jsx(E,{FallbackComponent:he,onError:C,children:l})})]})]})})})}function sn(t,n,s,a,u,l){var c=a,h=u,i,r,o;t.beginPath(),t.moveTo(n,s),t.lineTo(a,u),t.stroke(),t.beginPath(),i=Math.atan2(u-s,a-n),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.moveTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+c,o=l*Math.sin(i)+h,t.lineTo(r,o),t.closePath(),t.fill()}function rn(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function an(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function on(t,n,s,a,u){const c=[...t.posList],h=[...t.thetaList],i=.3,r=new Array(c.length).fill(0).map(()=>[]);return c.forEach((o,m)=>{c.forEach((f,x)=>{if(m!==x){const g=Math.abs(o[0]-f[0]),p=Math.abs(o[1]-f[1]),w=g>.5?1-g:g,y=p>.5?1-p:p;Math.hypot(w,y)<i&&r[m].push(x)}})}),h.forEach((o,m)=>{const f=r[m];if(f.length>0){const x=f.reduce((g,p)=>{const w=h[p];return g+Math.sin(w-o)},0)/f.length;h[m]=o+s*x+(u?Math.sqrt(n)*.1*an(0,10)*a:0)}h[m]=(h[m]+2*Math.PI)%(2*Math.PI)}),h}function ln(t,n,s){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),s.posList.forEach((a,u)=>{const l=rn(a,n),c=s.thetaList[u],h=30;t.lineWidth=2,t.strokeStyle="white",t.fillStyle="white";const i=h*.81,r=i*Math.cos(c),o=i*Math.sin(c);sn(t,l.x-r/2,l.y-o/2,l.x+r/2,l.y+o/2,5)})}function cn(t,n,s,a,u,l){const[h,i]=[16,Math.floor(16/n)];let r=j.useRef(new Array(16).fill(!1).map(()=>[0,0])),o=j.useRef(new Array(16).fill(!1).map(()=>0));j.useMemo(()=>{const m=new Array(h*i).fill(!1).map((x,g)=>[(g%h+.5)/h,(Math.floor(g/h)+.5)/i]),f=new Array(h*i).fill(!1).map(()=>Math.random()*2*Math.PI);r.current=m,o.current=f},[]),j.useEffect(()=>{if(!l)return;const m=t.current;m||C(new Error("Canvas reference is null (Kuramoto simulation)"));const f=m,x=window.devicePixelRatio||1,g=f.getBoundingClientRect(),p=g.width*x,w=g.height*x;f.width=p,f.height=w;const y=f.getContext("2d");y||C(new Error("Canvas context is null (Kuramoto simulation)"));const v=y;let L,S=new Date().getTime();const k=()=>{const N=new Date().getTime(),T=(N-S)/1e3;S=N,o.current=on({posList:r.current,thetaList:o.current},s,a,T,u),ln(v,{width:p,height:w},{posList:r.current,thetaList:o.current}),L=window.requestAnimationFrame(k)};return k(),()=>{window.cancelAnimationFrame(L)}},[t,l])}function _e(t){const[n,s]=j.useState(!1),[a,u]=j.useState(7),[l,c]=j.useState(.3),h=j.createRef(),i=j.useMemo(()=>16/9,[]);cn(h,i,a,l/50,t.showTSlider,n);let r=e.jsxs(e.Fragment,{children:[t.showTSlider&&e.jsx($,{label:"Temperature",value:a,onChange:u,min:0,max:15,step:.01,color:"#6a5ff7",displayValue:!1}),e.jsx($,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†Interaction"}),value:l,onChange:c,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:h,onChangeVisibleState:s,is2D:!0})}function O(t){return e.jsx(Le,{from:[29,157,242],to:[224,2,161],bold:t.bold,italic:t.italic,children:t.children})}function hn(){return e.jsxs(ne,{title:"...through the synchronized flashing of fireflies...",children:[e.jsxs(F,{title:"Fireflies?",children:[e.jsxs(B,{children:["Did you ever see ",e.jsx(O,{bold:!0,children:"fireflies"})," ",e.jsx("i",{children:"flashing in the night"}),"? If so, did you notice anything special about them?"]}),e.jsxs(b,{children:["If you did, you might have noticed that their ",e.jsx(d,{type:"electron",bold:!0,children:"light"})," seems to ",e.jsx(d,{type:"electron",italic:!0,children:"blink"})," in a ",e.jsx("strong",{children:"synchronized"})," manner, almost like a ",e.jsx("i",{children:"dance"}),"."]}),e.jsx(ee,{showSliders:!1,omegaActivated:!0}),e.jsxs(b,{children:["What if I told you that, using just a ",e.jsx("strong",{children:"very slightly modified version"})," of what we just saw, we can explain this synchronized flashing of fireflies?"]})]}),e.jsxs(F,{title:"Extending the Ising model",children:[e.jsxs(Z,{children:["So far, we saw how to describe ",e.jsx(I,{italic:!0,bold:!0,children:"magnets"})," using the ",e.jsx("i",{children:"Ising model"}),".",e.jsx("br",{}),"But I just told you that using a ",e.jsx("strong",{children:"generalization"})," of this model, we could also describe ",e.jsx(O,{italic:!0,bold:!0,children:"fireflies"}),". Try to think about how we could do this."]}),e.jsxs(b,{children:["Let's first talk about the Ising model, ",e.jsx("i",{children:"again"}),". Trust me on this. A core approximation that we did was to consider the ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"spins"})," of every atoms (their tiny ",e.jsx(d,{type:"electron",italic:!0,children:"arrows"}),") only either pointing ",e.jsx(d,{type:"magnet-north",children:"up"})," or ",e.jsx(d,{type:"magnet-south",children:"down"}),", that is ",e.jsx(M,{children:"S_j = \\pm 1"}),". However, in real life, spins are not limited to just two values: they can point in ",e.jsx("i",{children:"any direction"}),"."]}),e.jsx(_,{children:"Here, we represent 2D spins to simplify the simulations, but the model can be extended to 3D spins."}),e.jsxs(b,{children:["To simplify a bit, instead of talking about vectors, we describe each atom by an ",e.jsx(d,{type:"electron",bold:!0,children:"angle"})," to, let's say, the ",e.jsx("i",{children:"horizontal axis"}),". Therefore, instead of using ",e.jsx(M,{children:"\\color{electron}{S}_j"})," to describe the atom ",e.jsx(M,{children:"j"}),", we use the angle ",e.jsx(M,{children:"\\color{electron}{\\theta}_j"}),". What is nice about this, is that now this angle is no longer just ",e.jsx(M,{type:"magnet-north",children:"\\pi/2"})," (",e.jsx(d,{type:"magnet-north",italic:!0,children:"up"})," where ",e.jsx(M,{children:"S_j =\\,"}),e.jsx(M,{type:"magnet-north",children:"+1"}),") or ",e.jsx(M,{type:"magnet-south",children:"-\\pi/2"})," (",e.jsx(d,{type:"magnet-south",italic:!0,children:"down"})," where ",e.jsx(M,{children:"S_j =\\,"}),e.jsx(M,{type:"magnet-south",children:"-1"}),"), but can take ",e.jsx("strong",{children:"any value"})," in between, making it continuous."]}),e.jsxs(b,{children:["We can now rewrite our earlier algorithm as the equation",e.jsx(A,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j). $$"}),"Let's break this down:",e.jsxs("ul",{children:[e.jsxs("li",{children:["The notation ",e.jsx(M,{children:"\\mathrm{d}\\color{electron}{\\theta}_j/\\mathrm{d}t"})," means that we are looking at how the ",e.jsx(d,{type:"electron",children:"angle"})," of ",e.jsx(M,{children:"j"})," ",e.jsx("strong",{children:"changes over time"}),"."]}),e.jsxs("li",{children:["The term ",e.jsx(M,{children:"\\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j)"})," tells us about the ",e.jsx("strong",{children:"interactions"}),":",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the angle of ",e.jsx(M,{children:"j"})," is ",e.jsx(d,{type:"magnet-north",bold:!0,children:"larger"})," than the angle of ",e.jsx(M,{children:"j'"})," (",e.jsx(M,{children:"j"})," is ",e.jsx(d,{type:"magnet-north",italic:!0,children:"ahead"})," of ",e.jsx(M,{children:"j'"}),"), the sinus is ",e.jsx("i",{children:"negative"}),", so ",e.jsx(M,{children:"\\color{electron}{\\theta}_j"})," will tend to ",e.jsx(d,{type:"magnet-north",italic:!0,children:"decrease"}),": ",e.jsx(M,{children:"j"})," will try to ",e.jsx(d,{type:"magnet-north",bold:!0,children:"slow down"})," for ",e.jsx(M,{children:"j'"}),"."]}),e.jsxs("li",{children:["Conversely, if the angle of ",e.jsx(M,{children:"j"})," is ",e.jsx(d,{type:"magnet-south",bold:!0,children:"lower"})," compared to the one of ",e.jsx(M,{children:"j'"})," (",e.jsx(M,{children:"j"})," is ",e.jsx(d,{type:"magnet-south",italic:!0,children:"behind"})," ",e.jsx(M,{children:"j'"}),"), the sinus is ",e.jsx("i",{children:"positive"}),", so ",e.jsx(M,{children:"\\color{electron}{\\theta}_j"})," will tend to ",e.jsx(d,{type:"magnet-south",italic:!0,children:"increase"}),": ",e.jsx(M,{children:"j"})," will try to ",e.jsx(d,{type:"magnet-south",bold:!0,children:"catch up"})," with ",e.jsx(M,{children:"j'"}),"."]})]})]}),e.jsxs("li",{children:["The ",e.jsx("i",{children:"positive"})," ",e.jsx(d,{type:"coupling",italic:!0,bold:!0,children:"interaction strength constant"})," ",e.jsx(M,{children:"\\color{coupling}{K}"})," measures how strongly the neighbors ",e.jsx(d,{type:"coupling",italic:!0,children:"influence"})," each other. If ",e.jsx(M,{children:"K"})," is large, the arrows will tend to align more quickly than if it's small."]})]})]}),e.jsx(_e,{showTSlider:!1,title:"2D Ising Model",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Here below is the simulation of this ",e.jsx("i",{children:"2D Ising model"}),", where each atom is represented as an ",e.jsx(d,{type:"electron",italic:!0,children:"arrow"}),". Try to change the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," ",e.jsx(M,{type:"coupling",children:"K"})," using the ",e.jsx(d,{type:"coupling",italic:!0,children:"slider"}),", and see what happens."]})})}),e.jsx(b,{children:"And... I think that we forgot about our last, and most important, ingredient!"}),e.jsxs(B,{children:["Where is the ",e.jsx(d,{type:"temperature",children:"temperature"}),"?"]}),e.jsxs(b,{children:["To add it, we can simply add a term in ",e.jsx(M,{children:"\\sqrt{\\color{temperature}{T}}"})," times a factor ",e.jsx(M,{children:"\\eta(t)"}),". This ",e.jsx(M,{children:"\\eta(t)"})," term will ",e.jsx(d,{type:"electron",children:"randomly"})," change the ",e.jsx(d,{type:"electron",children:"angle"})," of each atom at each time ",e.jsx(M,{children:"t"}),", simulating the effect of ",e.jsx(d,{type:"temperature",italic:!0,children:"thermal fluctuation"}),"."]}),e.jsx(Y,{title:"Temperature dependence",children:e.jsxs(b,{children:["The fact that we took the ",e.jsx("i",{children:"square root"})," of the temperature is a bit technical, but it is a common way to model thermal fluctuations in physics. These types of equations are called ",e.jsx("strong",{children:"stochastic spin dynamics"}),", and here more particularly, the ",e.jsx("i",{children:"Langevin-Landau-Gilbert"})," equation."]})}),e.jsxs(b,{children:["So our final equation becomes the so-called ",e.jsx("strong",{children:"XY model"}),e.jsx(A,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}. $$"})]}),e.jsx(_e,{showTSlider:!0,title:"XY Model",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["The same model as before, but now with the ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," ",e.jsx(M,{type:"temperature",children:"T"}),". Try to play with these ",e.jsx("i",{children:"two sliders"}),". Now, the arrows should be ",e.jsx(d,{type:"temperature",italic:!0,children:"moving around"}),"."]})})}),e.jsxs(b,{children:["As I don't want to go into too much detail in this article, let's continue by ",e.jsx("i",{children:"finally"})," talking about... ",e.jsx(O,{italic:!0,bold:!0,children:"fireflies"}),"!"]}),e.jsxs(Y,{title:"BKT transition",children:[e.jsxs(b,{children:["The main difference with the previous 1D Ising model is that the XY model has a ",e.jsx("i",{children:"continuous symmetry"}),", meaning that the arrows can point in ",e.jsx("strong",{children:"any direction"}),", not just up or down."]}),e.jsxs(b,{children:["A mathematical theorem known as the ",e.jsx("i",{children:"Mermin-Wagner theorem"}),", explains why this continuous symmetry is important:",e.jsxs("ul",{children:[e.jsxs("li",{children:["For ",e.jsx(d,{type:"electron",italic:!0,children:"3D spins"}),", we recover a phase transition ",e.jsx("i",{children:"pretty similar"})," to the Ising one."]}),e.jsxs("li",{children:["For ",e.jsx(d,{type:"electron",italic:!0,children:"2D spins"}),", however, a new phase transition appears, called the ",e.jsx("i",{children:"Berezinski-Kosterlitz-Thouless"})," (BKT) transition, which is a bit more subtle than the one we saw in the Ising model. It is no longer a simple change from ",e.jsx(d,{type:"coupling",italic:!0,children:"ordered"})," to ",e.jsx(d,{type:"coupling",italic:!0,children:"disordered"}),", but rather a ",e.jsx("strong",{children:"change in the nature of the order itself"}),"."]})]})]})]})]}),e.jsxs(F,{title:"The synchronisation of fireflies",children:[e.jsxs(Z,{children:["That's very nice, but ",e.jsx("i",{children:"what does it have to do with fireflies?"}),e.jsx("br",{}),"Let's start by thinking about it for a bit."]}),e.jsxs(b,{children:["First let's change our perspective a little. Instead of thinking of a ",e.jsx(O,{children:"firefly"})," as a complex organism, we can think of it as a little ",e.jsx(d,{type:"electron",bold:!0,children:"arrow"})," that constantly rotates. When it is, let's say, pointing ",e.jsx(d,{type:"electron",italic:!0,children:"up"}),", the firefly ",e.jsx(d,{type:"electron",italic:!0,children:"flashes"}),"."]}),e.jsxs(b,{children:["So now, synchronisation of flashes of fireflies can be seen as if the little ",e.jsx(d,{type:"electron",italic:!0,children:"arrows"})," of the fireflies are ",e.jsx(d,{type:"electron",bold:!0,children:"trying to align"})," with each other... And this is exactly what the ",e.jsx("strong",{children:"XY model"})," describes!"]}),e.jsxs(_,{children:["Biologically, fireflies try to ",e.jsx("strong",{children:"mimic"})," the flashing rate of their neighbors. This occurs to be a strategy to maximize the chances of ",e.jsx("strong",{children:"finding a mate"}),", or reduce ",e.jsx("strong",{children:"predation risk"}),": a predator seeing a whole group of flashing fireflies might be confused, and not be able to focus on a single one."]}),e.jsx(Jt,{title:"One Firefly",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["One firefly is represented by a ",e.jsx(d,{type:"electron",italic:!0,children:"rotating arrow"}),". When the arrow is ",e.jsx("i",{children:"up"}),", it ",e.jsx("i",{children:"flashes"}),".",e.jsx("br",{}),"Try to change the ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," ",e.jsx(M,{type:"temperature",children:"T"})," using the slider to see how much the arrow is ",e.jsx(d,{type:"temperature",italic:!0,children:"shaken around"}),"."]})})}),e.jsxs(b,{children:["We can then use the same model as for ",e.jsx(I,{children:"magnetism"}),", with a slight change of perspective:",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(O,{bold:!0,children:"Fireflies"})," are not atoms arranged in a regular grid. They can ",e.jsx("strong",{children:"freely move"})," in all directions. Moreover, a neighbor of a firefly is now described as any other firefly that is ",e.jsx("strong",{children:"close enough"})," to it."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"noise"})," ",e.jsx(M,{type:"temperature",children:"T"}),", previously represented ",e.jsx("i",{children:"how much the arrows were shaken"})," around due to ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," fluctuations. Now, this ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," describes how much the fireflies are ",e.jsx(d,{type:"temperature",bold:!0,children:"independent"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction strength"})," ",e.jsx(M,{type:"coupling",children:"K"})," now describes ",e.jsx(d,{type:"coupling",italic:!0,children:"how strongly"})," a given firefly wants to ",e.jsx(d,{type:"coupling",italic:!0,children:"align"})," with its neighbors."]})]}),"And... that's it! Just a change of interpretation, nothing more."]}),e.jsx(ee,{showSliders:!0,omegaActivated:!1,title:"Fireflies Synchronisation",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Here is the simulation of the fireflies described by our model.",e.jsx("br",{}),"You can change the ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," and the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," using the two sliders, and ",e.jsx(d,{type:"electron",italic:!0,children:"tick the box"})," to show the individual ",e.jsx(d,{type:"electron",italic:!0,children:"arrows"})," of each firefly."]})})}),e.jsx(B,{children:"Hum... why are they never flashing?"}),e.jsxs(b,{children:["Oops! We forgot to add in our equation that each little arrow now ",e.jsx(d,{type:"electron",italic:!0,children:"rotates continuously"})," over time. We write the  ",e.jsx(d,{type:"electron",bold:!0,children:"speed"})," of the rotation of each firefly as ",e.jsx(M,{children:"\\color{electron}{\\omega}_j"}),". So let's add this to our model that becomes",e.jsx(A,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{electron}{\\omega}_j + \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}.$$"})]}),e.jsxs(_,{children:["Here, we took the frequency ",e.jsx(M,{children:"\\omega_j"})," of each firefly from a ",e.jsx("i",{children:"Gaussian distribution"}),"."]}),e.jsx(ee,{showSliders:!0,omegaActivated:!0,title:"Fireflies Synchronisation",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["The same as before, but now with the ",e.jsx(d,{type:"electron",italic:!0,children:"intrinsic rotation"})," of each firefly activated.",e.jsx("br",{}),"Try to play with the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength slider"})," and see what happens!"]})})}),e.jsxs(_,{children:["In this simulation, the ",e.jsx("i",{children:"constant displacement"})," of each firefly isn't relevant. I just added it to make the simulation more visually appealing."]}),e.jsxs(b,{children:["If you paid attention, you just saw that the fireflies start to flash in ",e.jsx(d,{type:"magnet-north",children:"unison"})," when the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," is ",e.jsx(d,{type:"magnet-north",children:"large"})," enough. However, ",e.jsx(d,{type:"magnet-south",children:"below"})," a certain threshold, they suddenly stop synchronizing and flash ",e.jsx(d,{type:"magnet-south",children:"independently"}),". Does this remind you of something? Again, a ",e.jsx("strong",{children:"phase transition"}),"!"]}),e.jsxs(Z,{children:["So now, how do we ",e.jsx("i",{children:"characterize"})," this?",e.jsx("br",{}),"How do we know when the fireflies are ",e.jsx("i",{children:"synchronized"})," or ",e.jsx("i",{children:"not"}),"?"]}),e.jsxs(b,{children:["The first thing that we can do is put ",e.jsx(d,{type:"electron",children:"each arrow"})," on one big circle, to see how they are distributed."]}),e.jsx($e,{drawOrderParameter:!1,title:"Order parameter",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["The same simulation as before, but we now only draw the ",e.jsx(d,{type:"electron",children:"arrows"})," of each firefly on a ",e.jsx("strong",{children:"circle"}),". This allows us to see how the arrows are distributed.",e.jsx("br",{}),"Try to change the ",e.jsx(d,{type:"coupling",children:"interaction strength"})," using the slider."]})})}),e.jsxs(b,{children:["To measure the amount of synchronisation, we can use the same idea as before and define a sort of ",e.jsx(d,{type:"electron",italic:!0,children:"mean arrow"}),". The length of the arrow now tells us ",e.jsx("i",{children:"how synchronized the fireflies"})," are: if it is close to ",e.jsx(M,{type:"magnet-north",children:"1"}),", they are all flashing in ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"unison"}),". However, if it is closer to ",e.jsx(M,{type:"magnet-south",children:"0"}),", they are flashing ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"independently"}),"."]}),e.jsxs(Y,{title:"Mathematical definition",children:[e.jsxs(b,{children:["Mathematically, we can define this ",e.jsx(d,{type:"electron",bold:!0,children:"mean arrow"})," as a ",e.jsx("strong",{children:"complex number"})," ",e.jsx(A,{inline:!0,children:"$\\color{electron}{R} \\mathrm{e}^{\\mathrm{i}\\Phi}$"}),", where ",e.jsx(M,{type:"electron",children:"R"})," is the length of the arrow and ",e.jsx(M,{children:"\\Phi"})," is its angle",e.jsx(A,{children:"$$\\color{electron}{R} \\mathrm{e}^{\\mathrm{i}\\Phi} = \\frac{1}{N} \\sum_{j=1}^N e^{\\mathrm{i} \\color{electron}{\\theta}_j}.$$"})]}),e.jsxs(b,{children:["So why not simply take the ",e.jsx(d,{type:"electron",italic:!0,children:"average of the angles"}),"? Because angles are ",e.jsx(d,{type:"electron",bold:!0,children:"periodic"}),", meaning that if we take the ",e.jsx("i",{children:"average"})," of two angles that are close to ",e.jsx(M,{children:"0"})," and ",e.jsx(M,{children:"2\\pi"}),", we would get something close to ",e.jsx(M,{children:"\\pi"}),", which is ",e.jsx("i",{children:"not what we want"}),". Instead, we use ",e.jsx("strong",{children:"complex numbers"})," to represent the angles, which allows us to take into account this ",e.jsx(d,{type:"electron",bold:!0,children:"periodic nature"}),"."]})]}),e.jsx(G,{}),e.jsx($e,{drawOrderParameter:!0,title:"Order parameter",description:e.jsx(e.Fragment,{children:e.jsxs(b,{children:["Same as before, but now we also draw the ",e.jsx("strong",{children:"mean arrow"})," in white that represents the ",e.jsx("i",{children:"amount of synchronisation"}),"."]})})}),e.jsxs(b,{children:["Then, you guessed it, let's measure this ",e.jsx("strong",{children:"synchronisation amount"})," (the length of the mean arrow) for different values of the ",e.jsx(d,{type:"coupling",children:"interaction strength"}),"."]}),e.jsxs(_,{children:["You can also do this for the ",e.jsx("i",{children:"noise"}),", but will see that it is not as interesting. Here, the main parameter that drives the phase transition, the order parameter, is the ",e.jsx("i",{children:"interaction strength"}),"."]}),e.jsx("div",{style:{height:"35px"}}),e.jsx(nn,{title:"Synchronisation measurement",description:e.jsxs(b,{children:[e.jsx("strong",{children:"Try clicking"})," on the graph to see how the fireflies synchronisation amount changes varies with the ",e.jsx(d,{type:"coupling",children:"interaction strength"}),"."]})}),e.jsxs(b,{children:["Again, what you see is what we observed earlier. There is a ",e.jsx("strong",{children:"sudden change"})," in the synchronisation amount at a certain interaction strength. ",e.jsx(d,{type:"magnet-south",italic:!0,children:"Below"})," this value, the fireflies are ",e.jsx(d,{type:"magnet-south",italic:!0,children:"not synchronized"}),", while ",e.jsx(d,{type:"magnet-north",italic:!0,children:"above"})," it, they ",e.jsx(d,{type:"magnet-north",italic:!0,children:"flash in unison"}),"."]}),e.jsxs(b,{children:["What we observe is then another... ",e.jsx("strong",{children:"phase transition"}),"! You guessed it."]}),e.jsx(_,{children:"This model, called the Kuramoto model, can also be used to describe many other systems, such as neurons firing in the brain, or even the synchronisation of power grids."})]}),e.jsx(X,{}),e.jsxs(F,{children:[e.jsxs(b,{children:["Let's recap what we have learned so far. Magnets, fireflies, neurons, power grids... all these systems can be described by a very similar model. And they all exhibit something called a ",e.jsx("strong",{children:"phase transition"})," for a certain parameter (",e.jsxs("i",{children:[e.jsx(d,{type:"temperature",children:"temperature"}),", ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),", etc."]}),") which consist of a sudden change in their behavior."]}),e.jsxs(b,{children:["To finish with this article, let's take a look at one last example, which is for me the most visually striking one, ",e.jsx(D,{bold:!0,children:"fishes"}),"."]})]})]})}const dn=""+new URL("author-DU6Q4enZ.png",import.meta.url).href;function un(){function t(){navigator.clipboard.writeText(window.location.href)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"header-widgets",children:e.jsxs("div",{className:"header-widgets-left",children:[e.jsx("div",{className:"hwl-photo",children:e.jsx("img",{src:dn,alt:"Author"})}),e.jsxs("div",{className:"hwl-info",children:[e.jsx("div",{className:"hwl-info-name",children:"Maxime Dherb√©court"}),e.jsxs("div",{className:"hwl-info-desc",children:[e.jsxs("div",{className:"hwl-info-desc-up",children:[e.jsx("div",{className:"hwl-info-text",children:"26 August 2025"}),e.jsx("a",{className:"hwr-link-up",onClick:()=>t(),children:e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier"}),e.jsx("g",{id:"SVGRepo_tracerCarrier"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M7.05025 1.53553C8.03344 0.552348 9.36692 0 10.7574 0C13.6528 0 16 2.34721 16 5.24264C16 6.63308 15.4477 7.96656 14.4645 8.94975L12.4142 11L11 9.58579L13.0503 7.53553C13.6584 6.92742 14 6.10264 14 5.24264C14 3.45178 12.5482 2 10.7574 2C9.89736 2 9.07258 2.34163 8.46447 2.94975L6.41421 5L5 3.58579L7.05025 1.53553Z",fill:"#000000"}),e.jsx("path",{d:"M7.53553 13.0503L9.58579 11L11 12.4142L8.94975 14.4645C7.96656 15.4477 6.63308 16 5.24264 16C2.34721 16 0 13.6528 0 10.7574C0 9.36693 0.552347 8.03344 1.53553 7.05025L3.58579 5L5 6.41421L2.94975 8.46447C2.34163 9.07258 2 9.89736 2 10.7574C2 12.5482 3.45178 14 5.24264 14C6.10264 14 6.92742 13.6584 7.53553 13.0503Z",fill:"#000000"}),e.jsx("path",{d:"M5.70711 11.7071L11.7071 5.70711L10.2929 4.29289L4.29289 10.2929L5.70711 11.7071Z",fill:"#000000"})]})]})})]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("div",{className:"hwl-info-text",children:"25 minutes read"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("div",{className:"header-widgets-right",children:e.jsx("a",{className:"hwr-link",onClick:()=>t(),children:e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier"}),e.jsx("g",{id:"SVGRepo_tracerCarrier"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M7.05025 1.53553C8.03344 0.552348 9.36692 0 10.7574 0C13.6528 0 16 2.34721 16 5.24264C16 6.63308 15.4477 7.96656 14.4645 8.94975L12.4142 11L11 9.58579L13.0503 7.53553C13.6584 6.92742 14 6.10264 14 5.24264C14 3.45178 12.5482 2 10.7574 2C9.89736 2 9.07258 2.34163 8.46447 2.94975L6.41421 5L5 3.58579L7.05025 1.53553Z",fill:"#000000"}),e.jsx("path",{d:"M7.53553 13.0503L9.58579 11L11 12.4142L8.94975 14.4645C7.96656 15.4477 6.63308 16 5.24264 16C2.34721 16 0 13.6528 0 10.7574C0 9.36693 0.552347 8.03344 1.53553 7.05025L3.58579 5L5 6.41421L2.94975 8.46447C2.34163 9.07258 2 9.89736 2 10.7574C2 12.5482 3.45178 14 5.24264 14C6.10264 14 6.92742 13.6584 7.53553 13.0503Z",fill:"#000000"}),e.jsx("path",{d:"M5.70711 11.7071L11.7071 5.70711L10.2929 4.29289L4.29289 10.2929L5.70711 11.7071Z",fill:"#000000"})]})]})})})]})]})]})})})}function mn(){return e.jsx(e.Fragment,{children:e.jsxs(ne,{title:"introduction",hideTitle:!0,children:[e.jsx("div",{style:{height:"20px",marginTop:"50px"}}),e.jsx(un,{}),e.jsx(X,{style:{margin:"30px auto"}}),e.jsxs(b,{children:["On a summer night, you lie in a field looking at ",e.jsx(O,{italic:!0,bold:!0,children:"fireflies"})," lighting up the sky. At first, their flashes seem random, ",e.jsx("i",{children:"erratic"}),". But wait long enough, and you see magic happening: these tiny lanterns start to pulse ",e.jsx("strong",{children:"in unison"}),", creating waves of light that ripple through the darkness.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"Not far from here, ",e.jsx(D,{italic:!0,bold:!0,children:"school of fishes"})," swim through the seas with a similar grace. Each fish moves independently, yet together they form fluid, ",e.jsx("strong",{children:"coordinated"})," pattern, almost like a dance.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"And back in your own hands, even a simple ",e.jsx(I,{italic:!0,bold:!0,children:"magnet"})," carries these mysteries: countless atoms inside ",e.jsx("strong",{children:"cooperate"})," to create a single, unified magnetism."]}),e.jsxs(b,{children:[e.jsx("i",{children:"What ties these scenes together?"})," How does order emerge, where we only expect disorder to happen? ",e.jsx("i",{children:"This"}),", is the story I want to tell you.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"But there's also a ",e.jsx("i",{children:"second story"}),", one just as important: how ",e.jsx(D,{italic:!0,bold:!0,children:"theory"})," itself is ",e.jsx(D,{italic:!0,bold:!0,children:"built"}),". We often picture scientists as people who know every answer there is. In reality, theory is a slow and complex process: you build a model, test it against the world, find where it fails, and refine it again. It takes time, patience, and imagination. So let yourself be guided along this article, ",e.jsx("strong",{children:"ask yourself questions when proposed to"}),", and step by step you'll discover ",e.jsx("i",{children:"how science is crafted"}),"."]}),e.jsxs(b,{children:["By the end of this journey, you won't just see ",e.jsx(I,{italic:!0,children:"magnets"}),", ",e.jsx(O,{italic:!0,bold:!0,children:"fireflies"}),", and ",e.jsx(D,{italic:!0,bold:!0,children:"fishes"})," differently. You will see patterns, and most importantly, ",e.jsx("strong",{children:"know why"})," they happen. You'll also see how ",e.jsx("strong",{children:"theorists"}),", ",e.jsx("i",{children:"and especially physicists"}),", think, and why their work often unfolds in ",e.jsx("i",{children:"small"}),", ",e.jsx("i",{children:"steady steps"})," rather than sudden leaps.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"And without any longer introduction, let's begin."]})]})})}function gn({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulations."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function fn(){return e.jsx(E,{FallbackComponent:gn,onError:C,children:e.jsxs("div",{className:"conclusion-simulations-div",children:[e.jsx(re,{customT:3}),e.jsx(ee,{omegaActivated:!0,showSliders:!1,conclusion:!0}),e.jsx(le,{showSliders:!1,conclusion:!0})]})})}function xn(){return e.jsxs(ne,{title:"Conclusion",className:"conclusion-part",children:[e.jsxs(F,{children:[e.jsxs(b,{children:["In this article, we explored three different examples of systems in nature: ",e.jsx(I,{children:"magnets"}),", ",e.jsx(O,{children:"fireflies"})," and ",e.jsx(D,{children:"fishes"}),". A priori, these systems are very different and do not have much in common. Every individual in a system should behave in a completely ",e.jsx("strong",{children:"independent"})," manner, and should have its own specific ",e.jsx("i",{children:"rules"})," and ",e.jsx("i",{children:"behavior"}),"."]}),e.jsx(fn,{}),e.jsxs(b,{children:["However, if we vary a given parameter (",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"}),", ",e.jsx(d,{type:"coupling",italic:!0,children:"interactions"}),", ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"}),"), we observe that below (or above) a certain value, the individuals behave ",e.jsx(d,{type:"magnet-north",children:"independently"}),", while above (or below), they ",e.jsx(d,{type:"magnet-south",children:"coordinate"})," with each other. This common phenomenon is what we call a ",e.jsx("strong",{children:"phase transition"}),". It is a universal behavior that is found everywhere in nature, with magnets, fireflies, fishes, birds, herds of animals, and even humans!"]}),e.jsxs(b,{children:["And what we did in this article is pretty impressive! Using a common set of rules and a common mathematical model, we were able to explain very different behaviors of very different systems by ",e.jsx("strong",{children:"very similar mechanisms"}),". ",e.jsx("i",{children:"This"})," is the power of ",e.jsx(D,{children:"theoretical physics"}),"!"]}),e.jsxs(b,{children:["I also hope that you understand a bit more the ",e.jsx("i",{children:"scientific method"})," and especially ",e.jsx("strong",{children:"how theorists work"}),", as it is often a gray zone for many: they build models for a given phenomenon, test them, try to understand the results, see where they match reality... and then notice where they don't! They then try to modify their model to better fit reality, and explore ",e.jsx("strong",{children:"other phenomena"})," that could be explained by their model. This never-ending process is what takes ",e.jsx(I,{bold:!0,children:"lots of time"}),", but it is also what leads to a ",e.jsx("i",{children:"deeper understanding"})," of the world around us."]}),e.jsx(ft,{list:[["Bartosz Ciechanowski","https://ciechanow.ski","Bartosz Ciechanowski is an awesome science communicator. You really should check this if you liked this article! I am a long time fan of his work, that really inspired me."],["Nicky Case","https://ncase.me","Another big inspiration is Nicky Case who makes amazing interactive explanations of complex topics."],["Nicky Case (Fireflies)","https://ncase.me/fireflies/","Here is Nicky Case's interactive explanation of the synchronization of fireflies, that inspired my own simulation."],["Femto physique (Ising model) - In French","https://femto-physique.fr/simulations/ising2D.php","Femto physique is a French website dedicated to physics teaching by simulations. It has a lot of great simulations, including this page on the Ising model!"],["Femto physique (Kuramoto model) - In French","https://femto-physique.fr/physique_statistique/modele-de-kuramoto.php","Again, the same website, but for the Kuramoto model."],["Vicsek Model of self-propelled particles","https://web.mit.edu/8.334/www/grades/projects/projects10/Hernandez-Lopez-Rogelio/dynamics_2.html","More insights on the Vicsek model and its applications."],["Stochastic Spin Dynamics by G.M. Wysin","https://www.phys.ksu.edu/personal/wysin/notes/stochastic.pdf","A very technical resource for those who want to go deeper in the subject. It explains how we can derive stochastic Langevin equations from quantum Hamiltonians."]]})]}),e.jsx(X,{}),e.jsxs(F,{children:[e.jsxs(b,{children:[e.jsx(D,{bold:!0,children:"Thank you for reading this article!"})," I hope you enjoyed it and learned something new, please share it online or to some friends!"]}),e.jsxs(b,{children:["If you want to see more content like this, sneak peeks of my work, tutorials or behind the scenes content, you can consider ",e.jsx(I,{children:"supporting me"})," on my ",e.jsx("a",{href:"https://www.patreon.com/mecanicascience",children:"Patreon"}),". And if you have any question, suggestion or feedback, feel free to reach out to me using the form below or on the ",e.jsx("a",{href:"https://www.patreon.com/mecanicascience",children:"Patreon"}),"."]})]})]})}function pn(){const[t,n]=j.useState(""),[s,a]=j.useState(""),[u,l]=j.useState(null),[c,h]=j.useState(""),[i,r]=j.useState(""),[o,m]=j.useState(!1);function f(g){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)}function x(g){if(g.preventDefault(),l(null),!f(t)){a("Please enter a valid email address."),l({type:"error",text:"Please enter a valid email address."});return}if(!c.trim()||!i.trim()){l({type:"error",text:"Please fill in all fields."});return}a(""),m(!0),rt(c,t,i).then(p=>{p?(l({type:"success",text:"Thank you for your message! I'll get back to you soon."}),h(""),n(""),r("")):(C(new Error("Failed to send comment (1).")),l({type:"error",text:`There was an error sending your message.
Please try again later or reach me directly using mecanicascience@gmail.com.`})),m(!1)}).catch(()=>{C(new Error("Failed to send comment (2).")),l({type:"error",text:`There was an error sending your message.
Please try again later or reach me directly using mecanicascience@gmail.com.`}),m(!1)})}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"comments-g-container",children:[e.jsx(X,{}),e.jsx("div",{className:"comments-container",children:e.jsxs("form",{className:"comments-form",onSubmit:x,children:[e.jsx("input",{type:"text",id:"comments-name",placeholder:"Name",value:c,onChange:g=>h(g.target.value)}),e.jsx("input",{type:"email",id:"comments-email",placeholder:"Email",value:t,onChange:g=>{n(g.target.value),s&&a(""),u&&l(null)},"aria-invalid":!!s}),e.jsx("textarea",{id:"comments-content",placeholder:"Your Message",value:i,onChange:g=>r(g.target.value)}),e.jsx("button",{type:"submit",className:s||u&&u.type==="error"?"error":"",disabled:o,children:o?"Sending...":"Contact me"}),u&&e.jsx("div",{className:`comments-message comments-${u.type}`,role:"alert",children:u.text})]})})]})})}function jn(){return e.jsxs("footer",{children:[e.jsxs("div",{className:"footer-span-bot",style:{display:"none"},children:[e.jsxs("span",{children:[e.jsx("title",{children:"Mecanica Science"}),e.jsx("link",{rel:"canonical",href:"https://www.mecanicascience.fr"})]}),e.jsxs("span",{children:[e.jsx("a",{href:"https://twitter.com/MecanicaSci",children:"Twitter"}),e.jsx("a",{href:"https://github.com/mecanicascience",children:"Github"}),e.jsx("a",{href:"https://www.patreon.com/c/MecanicaScience",children:"Patreon"}),e.jsx("a",{href:"https://www.youtube.com/c/MecanicaScience",children:"Youtube"}),e.jsx("a",{href:"mailto:mecanicascience@gmail.com",children:"Email"})]})]}),e.jsxs("div",{className:"footer-container",children:[e.jsxs("ul",{className:"f-item f-first-item",id:"social-ic",children:[e.jsx("li",{children:e.jsx("a",{href:"https://www.youtube.com/c/MecanicaScience",title:"Youtube",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/youtube-logo.png",alt:"youtube"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://twitter.com/MecanicaSci",title:"Twitter",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/twitter-logo.png",alt:"twitter"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://github.com/mecanicascience",title:"Github",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/github-logo.png",alt:"github"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.patreon.com/c/MecanicaScience",title:"Patreon",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/patreon-logo.png",alt:"patreon"})})})]}),e.jsx("h2",{className:"f-item underline-eff-white",id:"f-email"}),e.jsxs("ul",{className:"f-item",id:"f-links",style:{marginTop:"22px"},children:[e.jsx("li",{className:"underline-eff-white",children:e.jsx("a",{className:"f-link-i footer-link",href:"/",children:"Home"})}),e.jsx("li",{className:"underline-eff-white",children:e.jsx("a",{className:"f-link-i footer-link",href:"/contact",children:"Contact"})})]}),e.jsxs("div",{className:"f-item",id:"f-copyright",children:["¬©2025 MecanicaScience",e.jsxs("div",{className:"rules",children:["¬†¬†|¬†¬†",e.jsx("a",{href:"mailto:mecanicascience@gmail.com",children:"Email"}),"¬†¬†|¬†¬†",e.jsx("a",{href:"/feed",children:"RSS Feed"})]}),"¬†¬†|¬†¬†version 4.0.0"]})]})]})}function wn({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"header-error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function Ze(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function te(t,n){const s=1-Math.random(),a=Math.random();return Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*a)*n+t}function Ye(t,n,s,a,u){return t.map(l=>(l-n)*(u-a)/(s-n)+a)}function yn(t,n,s,a){const c=[...t.posList],h=[...t.velList],i=[...t.thetaList],r=[...t.tickingList],o=.3,m=new Array(c.length).fill(0).map(()=>[]);c.forEach((x,g)=>{c.forEach((p,w)=>{if(g!==w){const y=Math.abs(x[0]-p[0]),v=Math.abs(x[1]-p[1]),L=y>.5?1-y:y,S=v>.5?1-v:v;Math.hypot(L,S)<o&&m[g].push(w)}})}),i.forEach((x,g)=>{const p=m[g],w=t.omegaList[g];if(p.length>0){const L=p.reduce((S,k)=>{const N=i[k];return S+Math.sin(N-x)},0)/p.length;i[g]=x+w*a+s*L+Math.sqrt(n)*.1*te(0,10)*a}i[g]=(i[g]+2*Math.PI)%(2*Math.PI);const y=.1,v=3*Math.PI/2;i[g]>v-y&&i[g]<v+y&&(r[g]=1),r[g]>0&&(r[g]-=2*a,r[g]<0&&(r[g]=0))});const f=.02;return c.forEach((x,g)=>{const p=t.velList[g];x[0]+=p[0]*a,x[1]+=p[1]*a,x[0]=(x[0]+1)%1,x[1]=(x[1]+1)%1;let w=Math.hypot(p[0],p[1]);p[0]+=f*te(0,3)*a,p[1]+=f*te(0,3)*a,p[0]=p[0]/Math.hypot(p[0],p[1])*w,p[1]=p[1]/Math.hypot(p[0],p[1])*w}),[c,h,i,r]}function vn(t,n,s,a){const u=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),l=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),c=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),h=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");s.posList.forEach((i,r)=>{const o=Ye(i,0,1,-.05,1.05);t.save();const m=Ze(o,n),f=s.velList[r],x=Math.atan2(f[1],f[0]),g=a[r]>0,p=`rgba(255, 190, 14, ${a[r]*1})`,w="rgba(10, 10, 10, 1.0)";t.translate(m.x,m.y);const y=.3;t.scale(y,y),t.rotate(x+1.5),g&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=p,t.fill()),t.filter="none",t.fillStyle=w,t.strokeStyle=w,t.stroke(u),t.fill(u),t.lineWidth=2,t.strokeStyle=w,t.fillStyle="#dfdfdf25",t.stroke(l),t.stroke(c),t.fill(l),t.fill(c),t.fillStyle=g?p:"rgba(175, 172, 172, 0.2)",t.strokeStyle=w,t.stroke(h),t.fill(h),t.restore()})}function bn(t,n,s,a){const l=[...t.posList],c=[...t.velList],h=[...t.thetaList],i=.1,r=new Array(l.length).fill(0).map(()=>[]);return l.forEach((o,m)=>{l.forEach((f,x)=>{if(m!==x){const g=Math.abs(o[0]-f[0]),p=Math.abs(o[1]-f[1]),w=g>.5?1-g:g,y=p>.5?1-p:p;Math.hypot(w,y)<i&&r[m].push(x)}})}),h.forEach((o,m)=>{const f=r[m];if(f.length>0){const x=f.reduce((g,p)=>{const w=h[p];return g+Math.sin(w-o)},0)/f.length;h[m]=o+s*x+Math.sqrt(n)*.1*te(0,10)*a}h[m]=(h[m]+2*Math.PI)%(2*Math.PI)}),l.forEach((o,m)=>{const f=t.velList[m],x=h[m];o[0]+=f*a*Math.cos(x),o[1]+=f*a*Math.sin(x),o[0]=(o[0]+1)%1,o[1]=(o[1]+1)%1}),[l,c,h]}function Mn(t,n,s){const a=new Path2D("m 0,-55.361361 c -7.233624,0 -10.636408,16.309314 -11.276832,32.038875 0,0 -10.724855,13.7182701 -7.731827,16.9607201 2.298053,2.48955 6.066415,-3.9166901 7.692553,-7.0259301 0.124074,3.6295296 0.402629,7.0012301 0.819589,9.8603801 1.724739,11.82679 4.520187,26.0693599 7.10159,38.7227599 -0.728472,2.83258 -0.274272,5.35692 -2.141686,6.45639 -7.700014,4.53352 -12.889653,4.97487 -12.889653,10.10843 0,5.72617 14.482276,5.31951 18.426266,0.85421 3.94399,4.4653 18.426265,4.87196 18.426265,-0.85421 0,-5.13356 -5.189632,-5.57491 -12.889653,-10.10843 -1.86741,-1.09947 -1.912058,-3.87323 -2.32875,-6.39403 2.5814,-12.6534 5.563913,-26.9583299 7.288654,-38.7851199 0.41696,-2.85915 0.695509,-6.2308505 0.819589,-9.8603801 1.62613,3.10924 5.394503,9.5154801 7.692553,7.0259301 2.99303,-3.24245 -7.731827,-16.9607201 -7.731827,-16.9607201 C 10.636411,-39.052049 7.23363,-55.361361 0,-55.361361 Z");s.posList.forEach((u,l)=>{const c=Ye(u,0,1,-.05,1.05);t.save();const h=Ze(c,n),i=s.thetaList[l];t.translate(h.x,h.y);const r=.25;t.scale(r,r),t.rotate(i+1.7),t.fillStyle="#4e678bff",t.fill(a),t.restore()})}function Ln(t,n,s){const[h,i]=[10,Math.floor(10/n)],r=.15,o=30,[m,f]=[o,Math.floor(o/n)];let x=j.useRef(new Array(10).fill(!1).map(()=>[0,0])),g=j.useRef(new Array(10).fill(!1).map(()=>[0,0])),p=j.useRef(new Array(10).fill(!1).map(()=>0)),w=j.useRef(new Array(10).fill(!1).map(()=>0)),y=j.useRef(new Array(10).fill(!1).map(()=>0));j.useMemo(()=>{const k=new Array(h*i).fill(!1).map(()=>[Math.random(),Math.random()]),N=new Array(h*i).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]),T=new Array(h*i).fill(!1).map(()=>te(3,.2)),R=new Array(h*i).fill(!1).map(()=>Math.random()*2*Math.PI),P=new Array(h*i).fill(0);x.current=k,g.current=N,p.current=T,w.current=R,y.current=P},[]);let v=j.useRef(new Array(o).fill(!1).map(()=>[0,0])),L=j.useRef(new Array(o).fill(!1).map(()=>0)),S=j.useRef(new Array(o).fill(!1).map(()=>0));j.useMemo(()=>{const k=new Array(m*f).fill(!1).map(()=>[Math.random(),Math.random()]),N=new Array(m*f).fill(!1).map(()=>r*(.5+Math.random()*.6)),T=new Array(m*f).fill(!1).map(()=>Math.random()*2*Math.PI);v.current=k,L.current=N,S.current=T},[]),j.useEffect(()=>{if(!s)return;const k=t.current;k||C(new Error("Canvas reference is null (Header simulation)"));const N=k,T=window.devicePixelRatio||1,R=N.getBoundingClientRect(),P=R.width*T,V=R.height*T;N.width=P,N.height=V;const W=N.getContext("2d");W||C(new Error("Canvas context is null (Header simulation)"));const z=W;let K,Q=new Date().getTime();const ie=()=>{const Se=new Date().getTime(),ke=(Se-Q)/1e3;Q=Se,z.fillStyle="#070124ff",z.clearRect(0,0,P,V),z.fillRect(0,0,P,V),[v.current,L.current,S.current]=bn({posList:v.current,thetaList:S.current,velList:L.current},7,.03,ke),Mn(z,{width:P,height:V},{posList:v.current,velList:L.current,thetaList:S.current}),[x.current,g.current,w.current,y.current]=yn({posList:x.current,thetaList:w.current,velList:g.current,omegaList:p.current,tickingList:y.current},7,.03,ke),vn(z,{width:P,height:V},{posList:x.current,velList:g.current,thetaList:w.current},y.current),K=window.requestAnimationFrame(ie)};return ie(),()=>{window.cancelAnimationFrame(K)}},[t,s])}function Sn(){const t=j.createRef(),n=j.useMemo(()=>16/6,[]),s=j.createRef(),[a,u]=j.useState(!1);return ye(s,l=>u(l)),Ln(t,n,a),e.jsx(e.Fragment,{children:e.jsx(E,{FallbackComponent:wn,onError:C,children:e.jsx("div",{className:"simulation-header-canvas-container",ref:s,children:e.jsx("canvas",{className:"simulation-header-canvas",ref:t})})})})}function kn(){return e.jsxs(e.Fragment,{children:[e.jsx(Sn,{}),e.jsx("header",{className:"app-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{children:["THE SCIENCE OF",e.jsx("br",{}),"COMPLEXITY"]}),e.jsx("p",{children:"LET'S START"}),e.jsx("div",{className:"header-btn-action",children:e.jsx("a",{className:"header-btn-scroll",style:{cursor:"pointer"},onClick:()=>{window.scrollTo({top:document.getElementById("introduction")?.offsetTop,behavior:"smooth"})},children:e.jsx("div",{className:"header-btn-scroll-box",children:e.jsxs("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M11.9997 13.1716L7.04996     8.22186L5.63574 9.63607L11.9997 16L18.3637 9.63607L16.9495 8.22186L11.9997 13.1716Z",fill:"rgba(200,200,200,1)"})]})})})})]})})]})}function Nn(){const t=de.createRef(),[n,s]=de.useState(!0);return j.useEffect(()=>{n&&t.current&&(st(),s(!1))},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:t}),e.jsxs(mt,{children:[e.jsx(kn,{}),e.jsx(mn,{}),e.jsx(Tt,{}),e.jsx(hn,{}),e.jsx(zt,{}),e.jsx(xn,{}),e.jsx(pn,{}),e.jsx(jn,{})]})]})}function ze({error:t}){const{resetBoundary:n}=q();return e.jsxs("div",{className:"error-simulation",style:{maxWidth:"600px",margin:"auto"},children:[e.jsx("p",{children:"Something very (very) wrong happened in the article."}),e.jsx("button",{onClick:n,children:"Try again"})]})}const De=document.getElementById("root");if(De){const t={color:["\\class{texcolor-#1}{#2}",2]};Je.createRoot(De).render(e.jsx(E,{FallbackComponent:ze,onError:C,children:e.jsx(de.StrictMode,{children:e.jsx(tt,{config:{loader:{load:["[tex]/html"]},tex:{inlineMath:[["$","$"]],macros:t},options:{renderActions:{addMenu:[]}}},children:e.jsx(E,{FallbackComponent:ze,onError:C,children:e.jsx(Nn,{})})})})}))}else throw new Error("Could not find root element. This is likely due to a missing or incorrect HTML file.");
